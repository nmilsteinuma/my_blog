<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>TAD Blog Post 6</title>

  <meta property="description" itemprop="description" content="A short description of the post."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-04-12"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-04-12"/>
  <meta name="article:author" content="Noah Milstein"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="TAD Blog Post 6"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="A short description of the post."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="TAD Blog Post 6"/>
  <meta property="twitter:description" content="A short description of the post."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["TAD Blog Post 6"]},{"type":"character","attributes":{},"value":["A short description of the post.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Noah Milstein"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["2022-04-12"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["tad-blog-post-6_files/figure-html5/unnamed-chunk-103-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-104-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-106-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-113-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-114-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-125-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-126-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-128-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-13-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-135-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-136-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-26-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-33-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-43-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-54-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-57-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-63-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-64-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-70-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-81-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-82-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-84-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-91-1.png","tad-blog-post-6_files/figure-html5/unnamed-chunk-92-1.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="tad-blog-post-6_files/header-attrs-2.13/header-attrs.js"></script>
  <script src="tad-blog-post-6_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="tad-blog-post-6_files/popper-2.6.0/popper.min.js"></script>
  <link href="tad-blog-post-6_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="tad-blog-post-6_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="tad-blog-post-6_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="tad-blog-post-6_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="tad-blog-post-6_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="tad-blog-post-6_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="tad-blog-post-6_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"TAD Blog Post 6","description":"A short description of the post.","authors":[{"author":"Noah Milstein","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-04-12T00:00:00.000-04:00","citationText":"Milstein, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>TAD Blog Post 6</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A short description of the post.</p></p>
</div>

<div class="d-byline">
  Noah Milstein true 
  
<br/>2022-04-12
</div>

<div class="d-article">
<h2 id="blog-post-5-text-as-data">Blog Post 5 Text as Data</h2>
<h4 id="background-and-content">Background and Content</h4>
<p><strong>Background:</strong> My 5th blog post complied below
specifically concerns the use of unsupervised learning methods on the
data I intend to use for my final project which comprises 2711 blog
posts from the Subreddit r/guns which is described as a “A place for
responsible gun owners and enthusiasts to talk about guns without the
politics.” (from r/guns About Community) and since it is a somewhat
a-political group a great deal of conversation on the message board
concerns purchasing and use of firearms directly from the consumers. As
a result it is a useful source for understanding consumer behavior and
firearms as a piece of material culture.</p>
<p><strong>Content:</strong> The content of this post uses LDA (Latent
Dirichlet Allocation) in 2 different ways with the latter half borrowing
heavily from Martin Schweinberger’s github explanation for analysis and
visualization of topic modeling.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h4 id="loading-and-cleaning">Loading and Cleaning</h4>
<p><strong>Loading Data:</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>
<span class='co'># First I use a fucntion to load an RData file as R has no default </span>

<span class='va'>loadRData</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>fileName</span><span class='op'>)</span><span class='op'>{</span>
<span class='co'>#loads an RData file, and returns it</span>
    <span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span><span class='va'>fileName</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/get.html'>get</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>!=</span> <span class='st'>"fileName"</span><span class='op'>]</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># My first data frame comprises new posts as of march 26 2022 which are taken </span>
<span class='co'># from the 15th-26th of march primarily. </span>

<span class='va'>new_guns_urls</span> <span class='op'>&lt;-</span> <span class='fu'>loadRData</span><span class='op'>(</span><span class='st'>"/Users/noahmilstein/Desktop/Spring 2022/Textasdata/text_as_data_work/New_reddit_posts_3_26.RData"</span><span class='op'>)</span>

<span class='co'># Next I extract the 4 columns that I will need, title, date, comments</span>
<span class='co'># and non-title text</span>

<span class='va'>new_guns_urls_df</span><span class='op'>&lt;-</span><span class='va'>new_guns_urls</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"title"</span>, <span class='st'>"date_utc"</span>, <span class='st'>"comments"</span>, <span class='st'>"text"</span><span class='op'>)</span><span class='op'>]</span>

<span class='co'># Next I load the top posts of all time on the thread which go back to 2017 </span>
<span class='co'># With observations to march 2022 when it was scraped.</span>

<span class='va'>top_guns_urls</span> <span class='op'>&lt;-</span> <span class='fu'>loadRData</span><span class='op'>(</span><span class='st'>"/Users/noahmilstein/Desktop/Spring 2022/Textasdata/text_as_data_work/top_guns_urls.RData"</span><span class='op'>)</span>

<span class='va'>top_guns_urls_df</span><span class='op'>&lt;-</span><span class='va'>top_guns_urls</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"title"</span>, <span class='st'>"date_utc"</span>, <span class='st'>"comments"</span>,  <span class='st'>"text"</span><span class='op'>)</span><span class='op'>]</span>

<span class='co'>#hot_guns_urls &lt;- find_thread_urls(subreddit="guns", sort_by="hot")</span>
<span class='co'># save(hot_guns_urls, file="hot_guns_urls.RData")</span>

<span class='co'># Next "hot" posts are loaded which are also primarily from march 2022</span>

<span class='va'>hot_guns_urls</span><span class='op'>&lt;-</span>
  <span class='fu'>loadRData</span><span class='op'>(</span><span class='st'>"/Users/noahmilstein/Desktop/my_blog/_posts/2022-03-29-tad-post-4/hot_guns_urls.RData"</span><span class='op'>)</span>

<span class='va'>hot_guns_urls_df</span><span class='op'>&lt;-</span><span class='va'>hot_guns_urls</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"title"</span>, <span class='st'>"date_utc"</span>, <span class='st'>"comments"</span>, <span class='st'>"text"</span><span class='op'>)</span><span class='op'>]</span>
<span class='co'>#hot_guns_urls_df</span>
</code></pre>
</div>
</div>
<p><strong>Cleaning Data:</strong> I begin cleaning the data below by
adding row-names to the dataframe since the default was simply the title
of the post. Next I add all of the posts to the same dataframe to be
analyzed together and comprise a larger corpus. Though this will clearly
be biased towards recent posts as of march 2022 this is of less concern
than if it were a more political reddit, however because politics are
generally absent the posts will still represent a usable subset of</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'>#First I add rownames from 1 to 844 to the hot guns data frame</span>

<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>hot_guns_urls_df</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>844</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='co'>#Next I add rownames from 1 to 980 to the new guns data frame</span>

<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>new_guns_urls_df</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>980</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='co'>#Next I add the two row named data framed together by row.</span>

<span class='va'>hg_and_ng</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>hot_guns_urls_df</span>, <span class='va'>new_guns_urls_df</span><span class='op'>)</span>

<span class='co'>#After this I add rownames from 1 to 996 to the top guns data frame</span>

<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>top_guns_urls_df</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>996</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='co'># Finally I bind together the new and hot guns combined data frame with the </span>
<span class='co'># top guns data frame by row</span>

<span class='va'>whole_data_frame</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>hg_and_ng</span>, <span class='va'>top_guns_urls_df</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Since all of the posts come from the same sub Reddit I have to ensure
that all posts are unique as to avoid bias towards any particular set of
words. This is because top posts, hot posts, and recent posts could all
include the same post if it were to qualify for any of the categories by
the reddit algorithm.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># First I remove all non-unique rows from the data frame</span>

<span class='va'>whole_data_frame_unique</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>whole_data_frame</span><span class='op'>)</span>

<span class='co'># Next I add together the title and text of each reddit post to </span>
<span class='co'># ensure I am using all of the linguistic data in each post.</span>

<span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>all_text</span><span class='op'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>title</span>, <span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>text</span><span class='op'>)</span>

<span class='co'># Next I remove all line breaks from the posts to ensure aesthetic </span>
<span class='co'># specifications such as /r and /n are not included in the corpus</span>

<span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='st'>"all_text"</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='st'>"all_text"</span>,
                                    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"[\r\n]"</span>, <span class='st'>""</span>, <span class='va'>x</span><span class='op'>)</span>  <span class='op'>}</span><span class='op'>)</span> 

<span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='st'>"all_text"</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='st'>"all_text"</span>,
                                    <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"[\031\034\024]"</span>, <span class='st'>"`"</span>, <span class='va'>x</span><span class='op'>)</span> <span class='op'>}</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next I must convert the character vector of dates into an actual date
object using the as.Date() function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># As can be seen below I replace the previous date_utc column which was not </span>
<span class='co'># a date object with date_utc as a date object.</span>

<span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>date_utc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>date_utc</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next I begin to split my data into 2 sets, being the training and
validation sets.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># First I take my first 1900 posts to lowercase then tokenize them</span>

<span class='va'>whole_data_frame_tokens</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>tolower</a></span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>all_text</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>1900</span><span class='op'>]</span><span class='op'>)</span>

<span class='va'>whole_data_frame_tokens</span> <span class='op'>&lt;-</span> <span class='fu'>word_tokenizer</span><span class='op'>(</span><span class='va'>whole_data_frame_tokens</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># Next I use itoken from text2vec to iterate over my inputs to create a </span>
<span class='co'>#vocabulary</span>

<span class='va'>itoken_whole_df</span> <span class='op'>&lt;-</span> <span class='fu'>itoken</span><span class='op'>(</span><span class='va'>whole_data_frame_tokens</span>,
ids <span class='op'>=</span> <span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>id</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>1900</span><span class='op'>]</span>, progressbar <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>vocab_whole_df</span> <span class='op'>&lt;-</span> <span class='fu'>create_vocabulary</span><span class='op'>(</span><span class='va'>itoken_whole_df</span><span class='op'>)</span>

<span class='co'># I then observe the dimension of the new vocabulary</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>vocab_whole_df</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 8107    3</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># Next I prune the vocabulary to require a minimum term count of ten</span>
<span class='co'># That is not in more than 20% of douments</span>

<span class='va'>v_for_whole_df</span> <span class='op'>&lt;-</span> <span class='fu'>prune_vocabulary</span><span class='op'>(</span><span class='va'>vocab_whole_df</span>, term_count_min <span class='op'>=</span> <span class='fl'>10</span>, 
                                   doc_proportion_max <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># next these tokens are converted into vector space</span>

<span class='va'>vectorizer_whole_df</span> <span class='op'>&lt;-</span> <span class='fu'>vocab_vectorizer</span><span class='op'>(</span><span class='va'>v_for_whole_df</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># Here the vectorized vocabulary is used to create a document term matrix</span>

<span class='va'>dtm_whole_df</span> <span class='op'>&lt;-</span> <span class='fu'>create_dtm</span><span class='op'>(</span><span class='va'>itoken_whole_df</span>, <span class='va'>vectorizer_whole_df</span>, 
                           type <span class='op'>=</span> <span class='st'>"dgTMatrix"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="inital-lda-analysis">Inital LDA Analysis</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># next I make my first LDA model below</span>


<span class='va'>lda_model</span> <span class='op'>&lt;-</span> <span class='fu'>text2vec</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/text2vec/man/LatentDirichletAllocation.html'>LDA</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>n_topics <span class='op'>=</span> <span class='fl'>20</span>, doc_topic_prior <span class='op'>=</span> <span class='fl'>0.1</span>, 
                     topic_word_prior <span class='op'>=</span> <span class='fl'>0.01</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># next the model is fit to my document term matrix</span>

<span class='va'>doc_topic_distr</span> <span class='op'>&lt;-</span> 
 <span class='va'>lda_model</span><span class='op'>$</span><span class='fu'>fit_transform</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>dtm_whole_df</span>, n_iter <span class='op'>=</span> <span class='fl'>1000</span>, 
                          convergence_tol <span class='op'>=</span> <span class='fl'>0.001</span>, n_check_convergence <span class='op'>=</span> <span class='fl'>25</span>, 
                          progressbar <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>INFO  [12:00:55.700] early stopping at 225 iteration 
INFO  [12:00:55.964] early stopping at 75 iteration </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># To see that the 20 topics have worked I apply the topic model to the first </span>
<span class='co'># post which is mostly topic 10 with some 6.</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/barplot.html'>barplot</a></span><span class='op'>(</span><span class='va'>doc_topic_distr</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>, xlab <span class='op'>=</span> <span class='st'>"topic"</span>, 
        ylab <span class='op'>=</span> <span class='st'>"proportion"</span>, ylim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span>, 
        names.arg <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>doc_topic_distr</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-13-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># Next we look at the top 10 words for 3 of the topics being 1, 5, and 10</span>

<span class='va'>lda_model</span><span class='op'>$</span><span class='fu'>get_top_words</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span>, topic_number <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1L</span>, <span class='fl'>5L</span>, <span class='fl'>10L</span><span class='op'>)</span>, lambda <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      [,1]              [,2]    [,3]     
 [1,] &quot;amp&quot;             &quot;gun&quot;   &quot;looking&quot;
 [2,] &quot;s&quot;               &quot;years&quot; &quot;as&quot;     
 [3,] &quot;auto&quot;            &quot;so&quot;    &quot;be&quot;     
 [4,] &quot;format&quot;          &quot;be&quot;    &quot;or&quot;     
 [5,] &quot;width&quot;           &quot;me&quot;    &quot;glock&quot;  
 [6,] &quot;preview.redd.it&quot; &quot;12&quot;    &quot;i&#39;m&quot;    
 [7,] &quot;webp&quot;            &quot;two&quot;   &quot;any&quot;    
 [8,] &quot;jpg&quot;             &quot;only&quot;  &quot;9mm&quot;    
 [9,] &quot;https&quot;           &quot;i&#39;ve&quot;  &quot;not&quot;    
[10,] &quot;pjpg&quot;            &quot;today&quot; &quot;carry&quot;  </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># Next using the recommended lambda of 0.2 we again look at the top 10 words </span>
<span class='co'># for topics 1, 5, and 10</span>

<span class='va'>lda_model</span><span class='op'>$</span><span class='fu'>get_top_words</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span>, topic_number <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1L</span>, <span class='fl'>5L</span>, <span class='fl'>10L</span><span class='op'>)</span>, lambda <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      [,1]              [,2]    [,3]             
 [1,] &quot;amp&quot;             &quot;12&quot;    &quot;light&quot;          
 [2,] &quot;format&quot;          &quot;times&quot; &quot;recommendations&quot;
 [3,] &quot;width&quot;           &quot;local&quot; &quot;elite&quot;          
 [4,] &quot;preview.redd.it&quot; &quot;gauge&quot; &quot;conceal&quot;        
 [5,] &quot;webp&quot;            &quot;her&quot;   &quot;ccw&quot;            
 [6,] &quot;jpg&quot;             &quot;sent&quot;  &quot;holster&quot;        
 [7,] &quot;pjpg&quot;            &quot;weeks&quot; &quot;concealed&quot;      
 [8,] &quot;auto&quot;            &quot;years&quot; &quot;9mm&quot;            
 [9,] &quot;3024&quot;            &quot;gang&quot;  &quot;bang&quot;           
[10,] &quot;friday&quot;          &quot;she&quot;   &quot;19&quot;             </code></pre>
</div>
<h4 id="lda-on-second-part-of-data">LDA on Second Part of Data</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>


<span class='va'>it2</span> <span class='op'>&lt;-</span> <span class='fu'>itoken</span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>all_text</span><span class='op'>[</span><span class='fl'>1901</span><span class='op'>:</span><span class='fl'>2711</span><span class='op'>]</span>, <span class='va'>tolower</span>, <span class='va'>word_tokenizer</span>, ids <span class='op'>=</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>id</span><span class='op'>[</span><span class='fl'>1901</span><span class='op'>:</span><span class='fl'>2711</span><span class='op'>]</span><span class='op'>)</span>

<span class='va'>dtm_other_part</span> <span class='op'>&lt;-</span> <span class='fu'>create_dtm</span><span class='op'>(</span><span class='va'>it2</span>, <span class='va'>vectorizer_whole_df</span>, type <span class='op'>=</span> <span class='st'>"dgTMatrix"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>new_doc_topic_distr</span> <span class='op'>=</span> <span class='va'>lda_model</span><span class='op'>$</span><span class='fu'>transform</span><span class='op'>(</span><span class='va'>dtm_other_part</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>INFO  [12:00:56.299] early stopping at 50 iteration </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># Calculates perplexity between new and old topic word distribution</span>
<span class='fu'>text2vec</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/text2vec/man/perplexity.html'>perplexity</a></span><span class='op'>(</span><span class='va'>dtm_other_part</span>, 
           topic_word_distribution <span class='op'>=</span> <span class='va'>lda_model</span><span class='op'>$</span><span class='va'>topic_word_distribution</span>, 
           doc_topic_distribution <span class='op'>=</span> <span class='va'>new_doc_topic_distr</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 363.2141</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.structuraltopicmodel.com/'>stm</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>myDfm</span> <span class='op'>&lt;-</span> <span class='fu'>dfm</span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>all_text</span>,
  tolower<span class='op'>=</span><span class='cn'>TRUE</span>,
  remove <span class='op'>=</span> <span class='fu'>stopwords</span><span class='op'>(</span><span class='st'>'en'</span><span class='op'>)</span>, 
  remove_punct <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>myDfm</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 2711 9365</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>cor_topic_model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/stm.html'>stm</a></span><span class='op'>(</span><span class='va'>myDfm</span>, K <span class='op'>=</span> <span class='fl'>5</span>, 
                   verbose <span class='op'>=</span> <span class='cn'>FALSE</span>, init.type <span class='op'>=</span> <span class='st'>"Spectral"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/pkg/stm/man/labelTopics.html'>labelTopics</a></span><span class='op'>(</span><span class='va'>cor_topic_model</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Topic 1 Top Words:
     Highest Prob: first, like, range, gun, time, 9mm, shooting 
     FREX: &lt;, wednesday, tuesday, scar, politics, sunday, shoulder 
     Lift: 300blk, blank, forgive, italian, lapua, magdump, proud 
     Score: &lt;, wednesday, edition, thread, printed, sunday, scar 
Topic 2 Top Words:
     Highest Prob: 22, just, new, looking, barrel, rifle, gun 
     FREX: 16, 300, gauge, inches, picatinny, shelf, 357 
     Lift: -5.56, -very, -what, #200180, #883, #887, ^ 
     Score: 22, edition, 16, reman, 300, ptr91, prism 
Topic 3 Top Words:
     Highest Prob: one, got, guns, can, gun, get, anyone 
     FREX: gift, grandpa, grandfather, m1, id, im, black 
     Lift: -16.5, -m1, 0.50, 1-4x, 1.35, 1.70, 1100 
     Score: grandpa, faxon, black, grandfather, id, inherited, ship 
Topic 4 Top Words:
     Highest Prob: `, t, s, gun, can, m, ve 
     FREX: license, permit, ll, county, law, waiting, application 
     Lift: _a, _lower, _of, _out, _receiver, _state, _while 
     Score: `, permit, nassau, counties, county, license, t 
Topic 5 Top Words:
     Highest Prob: amp, =, s, gun, just, new, glock 
     FREX: =, format, webp, scam, pjpg, chamber, iron 
     Lift: 1-6, 115, 1986, 3rd, accessible, armalite, bare 
     Score: scam, =, webp, pjpg, format, nbsp, sites </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>whole_data_frame_unique_empty</span><span class='op'>&lt;-</span> <span class='va'>whole_data_frame_unique</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>120</span>, <span class='fl'>276</span>, <span class='fl'>2195</span><span class='op'>)</span>,<span class='op'>]</span>

<span class='va'>thoughts_whole_df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/findThoughts.html'>findThoughts</a></span><span class='op'>(</span><span class='va'>cor_topic_model</span>, 
    texts <span class='op'>=</span> <span class='va'>whole_data_frame_unique_empty</span><span class='op'>$</span><span class='va'>all_text</span>, 
    topics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span>,
    n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># choose our number of topics</span>
<span class='va'>k</span> <span class='op'>&lt;-</span> <span class='fl'>5</span>
<span class='va'>myDfm</span>
</code></pre>
</div>
<pre><code>Document-feature matrix of: 2,711 documents, 9,365 features (99.83% sparse) and 0 docvars.
       features
docs    help id ar barrel atf hates one trick clean tune
  text1    1  1  1      1   0     0   0     0     0    0
  text2    0  0  0      0   1     1   1     1     0    0
  text3    0  0  0      0   0     0   1     0     1    1
  text4    0  0  0      0   0     0   0     0     0    0
  text5    0  0  0      0   0     0   0     0     0    0
  text6    0  0  0      0   0     0   0     0     0    0
[ reached max_ndoc ... 2,705 more documents, reached max_nfeat ... 9,355 more features ]</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># specify model</span>

<span class='va'>myModel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/stm.html'>stm</a></span><span class='op'>(</span><span class='va'>myDfm</span>,
            K <span class='op'>=</span> <span class='va'>k</span>, 
            max.em.its <span class='op'>=</span> <span class='fl'>1000</span>, 
            seed <span class='op'>=</span> <span class='fl'>1234</span>, 
            init.type <span class='op'>=</span> <span class='st'>"Spectral"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Beginning Spectral Initialization 
     Calculating the gram matrix...
     Finding anchor words...
    .....
     Recovering initialization...
    .............................................................................................
Initialization complete.
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 1 (approx. per word bound = -7.874) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 2 (approx. per word bound = -7.757, relative change = 1.489e-02) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 3 (approx. per word bound = -7.670, relative change = 1.123e-02) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 4 (approx. per word bound = -7.630, relative change = 5.216e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 5 (approx. per word bound = -7.610, relative change = 2.650e-03) 
Topic 1: like, range, time, shooting, find 
 Topic 2: good, want, ammo, something, use 
 Topic 3: one, get, t, m, guns 
 Topic 4: `, can, gun, s, just 
 Topic 5: `, gun, just, amp, s 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 6 (approx. per word bound = -7.598, relative change = 1.521e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 7 (approx. per word bound = -7.590, relative change = 1.074e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 8 (approx. per word bound = -7.583, relative change = 8.550e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 9 (approx. per word bound = -7.578, relative change = 6.810e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 10 (approx. per word bound = -7.574, relative change = 5.696e-04) 
Topic 1: like, range, time, shooting, find 
 Topic 2: good, ammo, want, something, use 
 Topic 3: one, get, t, m, guns 
 Topic 4: `, can, gun, s, just 
 Topic 5: `, amp, gun, just, = 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 11 (approx. per word bound = -7.570, relative change = 5.182e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 12 (approx. per word bound = -7.566, relative change = 5.089e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 13 (approx. per word bound = -7.562, relative change = 5.096e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 14 (approx. per word bound = -7.558, relative change = 5.200e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 15 (approx. per word bound = -7.554, relative change = 5.428e-04) 
Topic 1: like, range, time, shooting, find 
 Topic 2: ammo, good, something, barrel, want 
 Topic 3: one, get, t, m, guns 
 Topic 4: `, can, gun, s, just 
 Topic 5: amp, `, gun, =, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 16 (approx. per word bound = -7.550, relative change = 5.693e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 17 (approx. per word bound = -7.545, relative change = 5.952e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 18 (approx. per word bound = -7.541, relative change = 6.056e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 19 (approx. per word bound = -7.536, relative change = 6.062e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 20 (approx. per word bound = -7.532, relative change = 5.984e-04) 
Topic 1: like, range, time, shooting, find 
 Topic 2: ammo, good, 22, barrel, new 
 Topic 3: one, guns, m, get, rifle 
 Topic 4: `, gun, can, s, just 
 Topic 5: amp, gun, `, =, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 21 (approx. per word bound = -7.528, relative change = 5.645e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 22 (approx. per word bound = -7.524, relative change = 5.194e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 23 (approx. per word bound = -7.520, relative change = 4.977e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 24 (approx. per word bound = -7.516, relative change = 4.853e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 25 (approx. per word bound = -7.513, relative change = 4.826e-04) 
Topic 1: like, range, shooting, time, much 
 Topic 2: ammo, 22, good, looking, new 
 Topic 3: one, guns, rifle, got, m 
 Topic 4: `, gun, can, s, just 
 Topic 5: amp, =, gun, `, s 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 26 (approx. per word bound = -7.509, relative change = 4.812e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 27 (approx. per word bound = -7.506, relative change = 4.555e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 28 (approx. per word bound = -7.502, relative change = 4.212e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 29 (approx. per word bound = -7.499, relative change = 3.950e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 30 (approx. per word bound = -7.497, relative change = 3.686e-04) 
Topic 1: like, range, shooting, time, 9mm 
 Topic 2: ammo, 22, looking, new, good 
 Topic 3: one, guns, got, rifle, get 
 Topic 4: `, gun, can, s, t 
 Topic 5: amp, =, gun, s, ` 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 31 (approx. per word bound = -7.494, relative change = 3.272e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 32 (approx. per word bound = -7.492, relative change = 2.912e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 33 (approx. per word bound = -7.490, relative change = 2.825e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 34 (approx. per word bound = -7.488, relative change = 2.878e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 35 (approx. per word bound = -7.486, relative change = 2.791e-04) 
Topic 1: like, range, shooting, first, 9mm 
 Topic 2: 22, new, ammo, looking, good 
 Topic 3: one, guns, got, rifle, get 
 Topic 4: `, gun, can, s, t 
 Topic 5: amp, =, gun, s, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 36 (approx. per word bound = -7.484, relative change = 2.623e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 37 (approx. per word bound = -7.482, relative change = 2.380e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 38 (approx. per word bound = -7.480, relative change = 2.188e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 39 (approx. per word bound = -7.479, relative change = 2.087e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 40 (approx. per word bound = -7.477, relative change = 2.040e-04) 
Topic 1: like, range, first, shooting, time 
 Topic 2: 22, new, ammo, looking, rifle 
 Topic 3: one, guns, got, rifle, get 
 Topic 4: `, gun, can, s, t 
 Topic 5: amp, =, gun, s, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 41 (approx. per word bound = -7.476, relative change = 1.938e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 42 (approx. per word bound = -7.474, relative change = 1.838e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 43 (approx. per word bound = -7.473, relative change = 1.731e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 44 (approx. per word bound = -7.472, relative change = 1.545e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 45 (approx. per word bound = -7.471, relative change = 1.450e-04) 
Topic 1: like, first, range, shooting, time 
 Topic 2: 22, new, rifle, ammo, looking 
 Topic 3: one, got, guns, rifle, get 
 Topic 4: `, gun, s, can, t 
 Topic 5: amp, =, gun, s, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 46 (approx. per word bound = -7.470, relative change = 1.360e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 47 (approx. per word bound = -7.469, relative change = 1.262e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 48 (approx. per word bound = -7.468, relative change = 1.193e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 49 (approx. per word bound = -7.467, relative change = 1.143e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 50 (approx. per word bound = -7.466, relative change = 1.161e-04) 
Topic 1: like, first, range, shooting, time 
 Topic 2: 22, new, gun, rifle, just 
 Topic 3: one, got, guns, can, get 
 Topic 4: `, gun, t, s, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 51 (approx. per word bound = -7.465, relative change = 1.234e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 52 (approx. per word bound = -7.464, relative change = 1.254e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 53 (approx. per word bound = -7.464, relative change = 1.164e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 54 (approx. per word bound = -7.463, relative change = 1.051e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 55 (approx. per word bound = -7.462, relative change = 9.778e-05) 
Topic 1: like, first, range, shooting, time 
 Topic 2: 22, new, gun, just, day 
 Topic 3: one, got, guns, can, get 
 Topic 4: `, gun, t, s, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 56 (approx. per word bound = -7.461, relative change = 9.900e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 57 (approx. per word bound = -7.461, relative change = 9.547e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 58 (approx. per word bound = -7.460, relative change = 9.574e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 59 (approx. per word bound = -7.459, relative change = 9.589e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 60 (approx. per word bound = -7.458, relative change = 9.368e-05) 
Topic 1: like, first, range, shooting, time 
 Topic 2: 22, new, just, day, looking 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, gun, t, s, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 61 (approx. per word bound = -7.458, relative change = 9.258e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 62 (approx. per word bound = -7.457, relative change = 8.702e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 63 (approx. per word bound = -7.457, relative change = 7.560e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 64 (approx. per word bound = -7.456, relative change = 6.881e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 65 (approx. per word bound = -7.456, relative change = 6.754e-05) 
Topic 1: first, like, range, time, shooting 
 Topic 2: 22, new, just, day, looking 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 66 (approx. per word bound = -7.455, relative change = 6.831e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 67 (approx. per word bound = -7.455, relative change = 6.982e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 68 (approx. per word bound = -7.454, relative change = 6.894e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 69 (approx. per word bound = -7.453, relative change = 6.754e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 70 (approx. per word bound = -7.453, relative change = 6.322e-05) 
Topic 1: first, like, range, time, 9mm 
 Topic 2: 22, just, new, looking, day 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 71 (approx. per word bound = -7.453, relative change = 5.943e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 72 (approx. per word bound = -7.452, relative change = 6.034e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 73 (approx. per word bound = -7.452, relative change = 4.518e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 74 (approx. per word bound = -7.451, relative change = 3.988e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 75 (approx. per word bound = -7.451, relative change = 3.800e-05) 
Topic 1: first, like, range, time, gun 
 Topic 2: 22, just, new, looking, day 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 76 (approx. per word bound = -7.451, relative change = 3.465e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 77 (approx. per word bound = -7.451, relative change = 3.224e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 78 (approx. per word bound = -7.450, relative change = 3.250e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 79 (approx. per word bound = -7.450, relative change = 3.341e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 80 (approx. per word bound = -7.450, relative change = 3.575e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, day 
 Topic 3: one, got, guns, can, get 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 81 (approx. per word bound = -7.450, relative change = 3.609e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 82 (approx. per word bound = -7.449, relative change = 3.574e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 83 (approx. per word bound = -7.449, relative change = 3.739e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 84 (approx. per word bound = -7.449, relative change = 3.351e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 85 (approx. per word bound = -7.449, relative change = 2.414e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, rifle 
 Topic 3: one, got, guns, get, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 86 (approx. per word bound = -7.449, relative change = 2.267e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 87 (approx. per word bound = -7.448, relative change = 2.455e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 88 (approx. per word bound = -7.448, relative change = 2.937e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 89 (approx. per word bound = -7.448, relative change = 3.046e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 90 (approx. per word bound = -7.448, relative change = 3.057e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, rifle 
 Topic 3: one, got, guns, gun, get 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 91 (approx. per word bound = -7.447, relative change = 3.606e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 92 (approx. per word bound = -7.447, relative change = 3.786e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 93 (approx. per word bound = -7.447, relative change = 3.598e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 94 (approx. per word bound = -7.447, relative change = 3.274e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 95 (approx. per word bound = -7.446, relative change = 2.800e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, rifle 
 Topic 3: one, got, guns, gun, get 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 96 (approx. per word bound = -7.446, relative change = 2.380e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 97 (approx. per word bound = -7.446, relative change = 2.102e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 98 (approx. per word bound = -7.446, relative change = 2.021e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 99 (approx. per word bound = -7.446, relative change = 2.030e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 100 (approx. per word bound = -7.446, relative change = 2.213e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, rifle 
 Topic 3: one, got, guns, gun, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 101 (approx. per word bound = -7.445, relative change = 2.758e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 102 (approx. per word bound = -7.445, relative change = 4.308e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 103 (approx. per word bound = -7.445, relative change = 3.474e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 104 (approx. per word bound = -7.445, relative change = 1.914e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 105 (approx. per word bound = -7.445, relative change = 1.569e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, rifle 
 Topic 3: one, got, guns, gun, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 106 (approx. per word bound = -7.444, relative change = 1.475e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 107 (approx. per word bound = -7.444, relative change = 1.416e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 108 (approx. per word bound = -7.444, relative change = 1.431e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 109 (approx. per word bound = -7.444, relative change = 1.636e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 110 (approx. per word bound = -7.444, relative change = 2.104e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, gun, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 111 (approx. per word bound = -7.444, relative change = 2.322e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 112 (approx. per word bound = -7.444, relative change = 2.000e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 113 (approx. per word bound = -7.443, relative change = 2.215e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 114 (approx. per word bound = -7.443, relative change = 1.866e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 115 (approx. per word bound = -7.443, relative change = 1.555e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, gun, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 116 (approx. per word bound = -7.443, relative change = 1.613e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 117 (approx. per word bound = -7.443, relative change = 1.470e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 118 (approx. per word bound = -7.443, relative change = 1.308e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 119 (approx. per word bound = -7.443, relative change = 1.416e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 120 (approx. per word bound = -7.443, relative change = 1.885e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, gun, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 121 (approx. per word bound = -7.442, relative change = 2.980e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 122 (approx. per word bound = -7.442, relative change = 4.146e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 123 (approx. per word bound = -7.442, relative change = 3.479e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 124 (approx. per word bound = -7.442, relative change = 2.484e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 125 (approx. per word bound = -7.442, relative change = 2.268e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, gun, can 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 126 (approx. per word bound = -7.441, relative change = 2.225e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 127 (approx. per word bound = -7.441, relative change = 1.395e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 128 (approx. per word bound = -7.441, relative change = 1.048e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 129 (approx. per word bound = -7.441, relative change = 1.053e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 130 (approx. per word bound = -7.441, relative change = 1.052e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 131 (approx. per word bound = -7.441, relative change = 1.092e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 132 (approx. per word bound = -7.441, relative change = 1.139e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 133 (approx. per word bound = -7.441, relative change = 1.474e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 134 (approx. per word bound = -7.441, relative change = 2.052e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 135 (approx. per word bound = -7.440, relative change = 2.148e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 136 (approx. per word bound = -7.440, relative change = 1.669e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 137 (approx. per word bound = -7.440, relative change = 1.682e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 138 (approx. per word bound = -7.440, relative change = 1.495e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 139 (approx. per word bound = -7.440, relative change = 1.229e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 140 (approx. per word bound = -7.440, relative change = 1.106e-05) 
Topic 1: first, like, range, gun, time 
 Topic 2: 22, just, new, looking, barrel 
 Topic 3: one, got, guns, can, gun 
 Topic 4: `, t, s, gun, can 
 Topic 5: amp, =, s, gun, just 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Model Converged </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/pkg/stm/man/labelTopics.html'>labelTopics</a></span><span class='op'>(</span><span class='va'>myModel</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Topic 1 Top Words:
     Highest Prob: first, like, range, gun, time, 9mm, shooting 
     FREX: &lt;, wednesday, tuesday, scar, politics, sunday, shoulder 
     Lift: 300blk, blank, forgive, italian, lapua, magdump, proud 
     Score: &lt;, wednesday, edition, thread, printed, sunday, scar 
Topic 2 Top Words:
     Highest Prob: 22, just, new, looking, barrel, rifle, gun 
     FREX: 16, 300, gauge, inches, picatinny, shelf, 357 
     Lift: -5.56, -very, -what, #200180, #883, #887, ^ 
     Score: 22, edition, 16, reman, 300, ptr91, prism 
Topic 3 Top Words:
     Highest Prob: one, got, guns, can, gun, get, anyone 
     FREX: gift, grandpa, grandfather, m1, id, im, black 
     Lift: -16.5, -m1, 0.50, 1-4x, 1.35, 1.70, 1100 
     Score: grandpa, faxon, black, grandfather, id, inherited, ship 
Topic 4 Top Words:
     Highest Prob: `, t, s, gun, can, m, ve 
     FREX: license, permit, ll, county, law, waiting, application 
     Lift: _a, _lower, _of, _out, _receiver, _state, _while 
     Score: `, permit, nassau, counties, county, license, t 
Topic 5 Top Words:
     Highest Prob: amp, =, s, gun, just, new, glock 
     FREX: =, format, webp, scam, pjpg, chamber, iron 
     Lift: 1-6, 115, 1986, 3rd, accessible, armalite, bare 
     Score: scam, =, webp, pjpg, format, nbsp, sites </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>myModel</span>, type <span class='op'>=</span> <span class='st'>"summary"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-26-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># get the words</span>
<span class='va'>myTopicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/labelTopics.html'>labelTopics</a></span><span class='op'>(</span><span class='va'>myModel</span>, n<span class='op'>=</span><span class='fl'>4</span><span class='op'>)</span><span class='op'>$</span><span class='va'>frex</span>

<span class='co'># set up an empty vector</span>
<span class='va'>myTopicLabels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='va'>k</span><span class='op'>)</span>

<span class='co'># set up a loop to go through the topics and collapse the words to a single name</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>myTopicLabels</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>myTopicNames</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span>, collapse <span class='op'>=</span> <span class='st'>"_"</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># print the names</span>
<span class='va'>myTopicLabels</span>
</code></pre>
</div>
<pre><code>[1] &quot;&lt;_wednesday_tuesday_scar&quot;    &quot;16_300_gauge_inches&quot;        
[3] &quot;gift_grandpa_grandfather_m1&quot; &quot;license_permit_ll_county&quot;   
[5] &quot;=_format_webp_scam&quot;         </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>modelEffects</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/estimateEffect.html'>estimateEffect</a></span><span class='op'>(</span>formula<span class='op'>=</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>~</span><span class='va'>comments</span>, 
        stmobj <span class='op'>=</span> <span class='va'>myModel</span>, 
        metadata <span class='op'>=</span> <span class='va'>whole_data_frame_unique_empty</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># estimate effects</span>
<span class='va'>modelEffects</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/estimateEffect.html'>estimateEffect</a></span><span class='op'>(</span>formula<span class='op'>=</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>~</span><span class='va'>comments</span>, 
        stmobj <span class='op'>=</span> <span class='va'>myModel</span>, 
        metadata <span class='op'>=</span> <span class='va'>whole_data_frame_unique_empty</span><span class='op'>)</span>

<span class='co'># plot effects</span>

<span class='va'>myRows</span> <span class='op'>&lt;-</span> <span class='fl'>2</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>myRows</span>,<span class='fl'>3</span><span class='op'>)</span>, bty<span class='op'>=</span><span class='st'>"n"</span>, lwd<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/pkg/stm/man/plot.estimateEffect.html'>plot.estimateEffect</a></span><span class='op'>(</span><span class='va'>modelEffects</span>, 
        covariate <span class='op'>=</span><span class='st'>"comments"</span>,  
        xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>.25</span>,<span class='fl'>.25</span><span class='op'>)</span>, 
        model <span class='op'>=</span> <span class='va'>myModel</span>, 
        topics <span class='op'>=</span> <span class='va'>modelEffects</span><span class='op'>$</span><span class='va'>topics</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, 
        method <span class='op'>=</span> <span class='st'>"difference"</span>, 
        cov.value1 <span class='op'>=</span> <span class='fl'>1</span>, 
        cov.value2<span class='op'>=</span><span class='fl'>0</span>, 
        main <span class='op'>=</span> <span class='va'>myTopicLabels</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, 
        printlegend<span class='op'>=</span><span class='cn'>F</span>, 
        linecol<span class='op'>=</span><span class='st'>"grey26"</span>, 
        labeltype<span class='op'>=</span><span class='st'>"custom"</span>, 
        verbose.labels<span class='op'>=</span><span class='cn'>F</span>, 
        custom.labels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>new<span class='op'>=</span><span class='cn'>F</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>differentKs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/searchK.html'>searchK</a></span><span class='op'>(</span><span class='va'>myDfm</span>, 
        K <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>,<span class='fl'>25</span>,<span class='fl'>50</span><span class='op'>)</span>, 
        prevalence <span class='op'>=</span><span class='op'>~</span> <span class='va'>comments</span>, 
        N<span class='op'>=</span><span class='fl'>250</span>, 
        data <span class='op'>=</span> <span class='va'>whole_data_frame_unique_empty</span>,
        max.em.its <span class='op'>=</span> <span class='fl'>1000</span>,
        init.type <span class='op'>=</span> <span class='st'>"Spectral"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>differentKs</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The results of the model above indicate 4 properties including held
out likelihood, which indicates a better model when it is larger,</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># choose our number of topics</span>
<span class='va'>k</span> <span class='op'>&lt;-</span> <span class='fl'>25</span>

<span class='co'># specify model</span>

<span class='va'>myModel_2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/stm.html'>stm</a></span><span class='op'>(</span><span class='va'>myDfm</span>,
            K <span class='op'>=</span> <span class='va'>k</span>, 
            max.em.its <span class='op'>=</span> <span class='fl'>1000</span>, 
            seed <span class='op'>=</span> <span class='fl'>1234</span>, 
            init.type <span class='op'>=</span> <span class='st'>"Spectral"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Beginning Spectral Initialization 
     Calculating the gram matrix...
     Finding anchor words...
    .........................
     Recovering initialization...
    .............................................................................................
Initialization complete.
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 1 (approx. per word bound = -7.966) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 2 (approx. per word bound = -7.590, relative change = 4.725e-02) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 3 (approx. per word bound = -7.296, relative change = 3.873e-02) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 4 (approx. per word bound = -7.163, relative change = 1.825e-02) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 5 (approx. per word bound = -7.082, relative change = 1.122e-02) 
Topic 1: guns, can, help, now, cleaning 
 Topic 2: s, question, `, day, like 
 Topic 3: m, first, shooting, time, good 
 Topic 4: can, gun, like, get, ammo 
 Topic 5: range, barrel, rifle, first, time 
 Topic 6: `, t, can, just, now 
 Topic 7: anyone, m, `, 300, ak 
 Topic 8: gun, just, first, shooting, get 
 Topic 9: know, use, get, site, red 
 Topic 10: got, see, finally, one, bolt 
 Topic 11: glock, get, first, know, rifle 
 Topic 12: like, can, looking, one, better 
 Topic 13: auto, birthday, 22, right, one 
 Topic 14: one, thanks, like, something, price 
 Topic 15: one, s, =, webp, amp 
 Topic 16: build, pistol, rifle, can, little 
 Topic 17: scam, site, `, likely, sites 
 Topic 18: w, $, ruger, just, looking 
 Topic 19: `, t, m, ve, don 
 Topic 20: s, amp, =, range, mag 
 Topic 21: new, find, ammo, bought, just 
 Topic 22: back, home, go, 45, safe 
 Topic 23: know, round, use, rifle, get 
 Topic 24: 9mm, shoot, handgun, look, sig 
 Topic 25: good, really, go, never, owner 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 6 (approx. per word bound = -7.044, relative change = 5.360e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 7 (approx. per word bound = -7.023, relative change = 3.025e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 8 (approx. per word bound = -7.008, relative change = 2.098e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 9 (approx. per word bound = -6.998, relative change = 1.511e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 10 (approx. per word bound = -6.989, relative change = 1.191e-03) 
Topic 1: guns, can, help, happy, rifle 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, time, m, first, ` 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: range, first, rifle, barrel, time 
 Topic 6: `, t, can, just, gun 
 Topic 7: anyone, `, 1911, ak, m 
 Topic 8: gun, just, first, shooting, get 
 Topic 9: know, red, dot, use, looking 
 Topic 10: got, today, see, finally, find 
 Topic 11: glock, get, firearm, know, glocks 
 Topic 12: like, can, looking, better, vs 
 Topic 13: 22, auto, birthday, colt, wednesday 
 Topic 14: one, thanks, ever, like, guys 
 Topic 15: =, one, s, amp, auto 
 Topic 16: build, pistol, can, lower, rifle 
 Topic 17: scam, site, ~, `, likely 
 Topic 18: w, $, ruger, just, looking 
 Topic 19: `, t, m, s, don 
 Topic 20: amp, s, =, range, mag 
 Topic 21: new, ammo, find, bought, just 
 Topic 22: back, home, 45, now, safe 
 Topic 23: know, like, round, rifle, good 
 Topic 24: 9mm, sig, 3d, handgun, edition 
 Topic 25: good, go, really, feel, sights 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 11 (approx. per word bound = -6.982, relative change = 1.071e-03) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 12 (approx. per word bound = -6.975, relative change = 9.429e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 13 (approx. per word bound = -6.969, relative change = 8.860e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 14 (approx. per word bound = -6.964, relative change = 7.586e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 15 (approx. per word bound = -6.959, relative change = 6.390e-04) 
Topic 1: guns, help, rifle, can, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, time, m, `, first 
 Topic 4: can, gun, like, get, ammo 
 Topic 5: range, first, barrel, rifle, time 
 Topic 6: `, t, can, just, m 
 Topic 7: anyone, `, 1911, ak, pistol 
 Topic 8: gun, just, first, shooting, years 
 Topic 9: know, find, red, anyone, looking 
 Topic 10: got, today, finally, old, see 
 Topic 11: glock, get, firearm, know, like 
 Topic 12: like, can, looking, vs, better 
 Topic 13: 22, colt, birthday, wednesday, gift 
 Topic 14: one, thanks, guys, ever, right 
 Topic 15: one, =, s, amp, auto 
 Topic 16: build, can, pistol, lower, little 
 Topic 17: scam, site, ~, `, likely 
 Topic 18: w, amp, $, ruger, just 
 Topic 19: `, t, s, m, don 
 Topic 20: amp, =, s, auto, mag 
 Topic 21: new, ammo, bought, find, just 
 Topic 22: back, home, 45, now, safe 
 Topic 23: like, know, round, good, rifle 
 Topic 24: 9mm, sig, 3d, printed, edition 
 Topic 25: good, go, sights, found, feel 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 16 (approx. per word bound = -6.956, relative change = 5.217e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 17 (approx. per word bound = -6.952, relative change = 4.846e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 18 (approx. per word bound = -6.949, relative change = 4.087e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 19 (approx. per word bound = -6.947, relative change = 3.418e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 20 (approx. per word bound = -6.945, relative change = 3.385e-04) 
Topic 1: guns, rifle, help, can, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, time, `, m, first 
 Topic 4: can, gun, like, get, ammo 
 Topic 5: range, first, barrel, time, rifle 
 Topic 6: `, t, can, m, just 
 Topic 7: anyone, 1911, `, ak, m 
 Topic 8: gun, just, first, years, can 
 Topic 9: know, anyone, find, looking, red 
 Topic 10: got, today, old, finally, ar 
 Topic 11: glock, get, firearm, like, glocks 
 Topic 12: like, looking, can, vs, better 
 Topic 13: 22, colt, birthday, wednesday, gift 
 Topic 14: one, thanks, guys, ever, love 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, lower, little 
 Topic 17: scam, site, ~, `, likely 
 Topic 18: amp, w, $, ruger, s 
 Topic 19: `, t, m, s, don 
 Topic 20: amp, =, s, auto, mag 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, 45, now, safe 
 Topic 23: like, know, round, good, use 
 Topic 24: 9mm, sig, 3d, printed, edition 
 Topic 25: good, go, sights, feel, found 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 21 (approx. per word bound = -6.942, relative change = 3.673e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 22 (approx. per word bound = -6.940, relative change = 2.916e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 23 (approx. per word bound = -6.938, relative change = 2.605e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 24 (approx. per word bound = -6.937, relative change = 2.616e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 25 (approx. per word bound = -6.935, relative change = 2.824e-04) 
Topic 1: guns, rifle, help, can, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, time, `, m, first 
 Topic 4: can, gun, like, get, ammo 
 Topic 5: range, first, barrel, time, rifle 
 Topic 6: `, t, m, can, just 
 Topic 7: anyone, 1911, `, ak, m 
 Topic 8: gun, just, first, years, can 
 Topic 9: know, anyone, find, looking, red 
 Topic 10: got, today, old, ar, finally 
 Topic 11: glock, get, firearm, like, glocks 
 Topic 12: like, looking, vs, can, better 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, thanks, guys, love, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, lower, little 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, s 
 Topic 19: `, t, m, s, don 
 Topic 20: amp, =, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, now, 45, safe 
 Topic 23: like, know, round, rifle, good 
 Topic 24: 9mm, 3d, sig, printed, edition 
 Topic 25: good, go, think, sights, shot 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 26 (approx. per word bound = -6.933, relative change = 2.611e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 27 (approx. per word bound = -6.931, relative change = 2.598e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 28 (approx. per word bound = -6.929, relative change = 2.166e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 29 (approx. per word bound = -6.928, relative change = 2.286e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 30 (approx. per word bound = -6.926, relative change = 2.032e-04) 
Topic 1: guns, help, rifle, can, last 
 Topic 2: `, s, day, question, m 
 Topic 3: shooting, time, `, m, first 
 Topic 4: can, gun, like, get, ammo 
 Topic 5: range, first, barrel, rifle, time 
 Topic 6: `, t, m, can, just 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, years, can 
 Topic 9: know, anyone, find, looking, red 
 Topic 10: got, today, old, ar, came 
 Topic 11: glock, get, like, firearm, glocks 
 Topic 12: like, 9mm, looking, vs, $ 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, guys, thanks, love, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, lower, little 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, s 
 Topic 19: `, t, s, don, m 
 Topic 20: amp, =, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, now, 45, safe 
 Topic 23: like, know, round, rifle, good 
 Topic 24: 9mm, 3d, printed, sig, edition 
 Topic 25: good, go, think, shot, range 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 31 (approx. per word bound = -6.925, relative change = 1.736e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 32 (approx. per word bound = -6.924, relative change = 1.961e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 33 (approx. per word bound = -6.922, relative change = 2.265e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 34 (approx. per word bound = -6.921, relative change = 2.386e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 35 (approx. per word bound = -6.919, relative change = 2.064e-04) 
Topic 1: guns, help, can, rifle, last 
 Topic 2: `, s, day, question, m 
 Topic 3: shooting, `, time, first, m 
 Topic 4: can, gun, like, get, ammo 
 Topic 5: range, first, barrel, rifle, time 
 Topic 6: `, t, m, can, gun 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, years, dad 
 Topic 9: know, anyone, find, looking, red 
 Topic 10: got, today, came, old, ar 
 Topic 11: glock, get, like, firearm, glocks 
 Topic 12: like, 9mm, vs, looking, $ 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, guys, love, thanks, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, pistol, lower, little 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, m 
 Topic 20: amp, =, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, now, safe, 45 
 Topic 23: like, know, round, rifle, good 
 Topic 24: 3d, printed, 9mm, sig, edition 
 Topic 25: good, go, range, shot, think 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 36 (approx. per word bound = -6.918, relative change = 1.570e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 37 (approx. per word bound = -6.917, relative change = 1.278e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 38 (approx. per word bound = -6.916, relative change = 1.172e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 39 (approx. per word bound = -6.916, relative change = 1.291e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 40 (approx. per word bound = -6.915, relative change = 1.148e-04) 
Topic 1: guns, help, can, last, rifle 
 Topic 2: `, s, day, question, m 
 Topic 3: `, shooting, time, first, much 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: first, barrel, range, rifle, 12 
 Topic 6: `, t, m, can, gun 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, years, dad 
 Topic 9: anyone, know, find, looking, red 
 Topic 10: got, today, came, old, ar 
 Topic 11: glock, get, like, firearm, know 
 Topic 12: like, 9mm, vs, $, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, guys, love, thanks, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, ruger, $, p 
 Topic 19: `, t, s, can, m 
 Topic 20: amp, =, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, now, safe, 45 
 Topic 23: like, know, round, rifle, good 
 Topic 24: 3d, printed, 9mm, edition, 44 
 Topic 25: range, good, shot, go, think 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 41 (approx. per word bound = -6.914, relative change = 1.007e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 42 (approx. per word bound = -6.913, relative change = 1.038e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 43 (approx. per word bound = -6.913, relative change = 1.006e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 44 (approx. per word bound = -6.912, relative change = 9.314e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 45 (approx. per word bound = -6.911, relative change = 9.346e-05) 
Topic 1: guns, help, can, last, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: `, time, shooting, first, much 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: first, barrel, range, rifle, 12 
 Topic 6: `, t, m, can, gun 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, dad, years 
 Topic 9: anyone, know, find, looking, red 
 Topic 10: got, today, came, old, ar 
 Topic 11: glock, get, like, firearm, know 
 Topic 12: like, 9mm, vs, $, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, guys, love, like, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, ruger, $, p 
 Topic 19: `, t, s, can, m 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, now, safe, made 
 Topic 23: like, know, round, good, rifle 
 Topic 24: 3d, printed, 9mm, edition, 44 
 Topic 25: range, good, shot, think, go 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 46 (approx. per word bound = -6.911, relative change = 1.094e-04) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 47 (approx. per word bound = -6.910, relative change = 6.030e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 48 (approx. per word bound = -6.910, relative change = 6.919e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 49 (approx. per word bound = -6.909, relative change = 7.885e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 50 (approx. per word bound = -6.909, relative change = 6.860e-05) 
Topic 1: guns, help, can, last, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: time, `, shooting, first, much 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: first, barrel, 12, rifle, cz 
 Topic 6: `, t, m, can, gun 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, dad, years 
 Topic 9: anyone, know, find, looking, red 
 Topic 10: got, today, came, first, ar 
 Topic 11: glock, get, like, firearm, know 
 Topic 12: like, 9mm, vs, &lt;, glock 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, guys, love, like, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, ruger, $, p 
 Topic 19: `, t, s, can, m 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, home, now, safe, made 
 Topic 23: like, know, round, good, rifle 
 Topic 24: 3d, printed, 9mm, edition, 44 
 Topic 25: range, good, rifle, shot, think 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 51 (approx. per word bound = -6.908, relative change = 5.871e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 52 (approx. per word bound = -6.908, relative change = 6.410e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 53 (approx. per word bound = -6.907, relative change = 7.145e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 54 (approx. per word bound = -6.907, relative change = 7.259e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 55 (approx. per word bound = -6.906, relative change = 6.171e-05) 
Topic 1: guns, help, can, last, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: time, `, shooting, first, much 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: first, barrel, 12, cz, sight 
 Topic 6: `, t, m, can, gun 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, dad, years 
 Topic 9: anyone, know, find, looking, red 
 Topic 10: got, today, first, came, ar 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, &lt;, glock 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, guys, like, love, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, ruger, $, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, now, safe, home, made 
 Topic 23: like, know, round, good, rifle 
 Topic 24: 3d, printed, 9mm, 44, edition 
 Topic 25: range, rifle, good, shot, think 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 56 (approx. per word bound = -6.906, relative change = 5.820e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 57 (approx. per word bound = -6.906, relative change = 5.664e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 58 (approx. per word bound = -6.905, relative change = 6.385e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 59 (approx. per word bound = -6.905, relative change = 6.362e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 60 (approx. per word bound = -6.904, relative change = 7.044e-05) 
Topic 1: guns, help, can, last, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: time, shooting, `, first, much 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, first, 12, cz, sight 
 Topic 6: `, t, m, can, don 
 Topic 7: 1911, anyone, ak, `, slide 
 Topic 8: gun, just, first, dad, years 
 Topic 9: anyone, find, know, looking, red 
 Topic 10: got, today, first, came, ar 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, glock, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, guys, love, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, safe, now, home, grandfather 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 9mm, 44, edition 
 Topic 25: range, rifle, shot, think, good 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 61 (approx. per word bound = -6.904, relative change = 7.334e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 62 (approx. per word bound = -6.903, relative change = 6.630e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 63 (approx. per word bound = -6.903, relative change = 7.107e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 64 (approx. per word bound = -6.902, relative change = 6.460e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 65 (approx. per word bound = -6.902, relative change = 4.952e-05) 
Topic 1: guns, help, can, gun, last 
 Topic 2: `, s, day, question, safe 
 Topic 3: time, shooting, `, much, first 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, first, 12, cz, sight 
 Topic 6: `, t, m, can, don 
 Topic 7: 1911, ak, anyone, slide, ` 
 Topic 8: gun, just, first, dad, years 
 Topic 9: anyone, find, know, looking, red 
 Topic 10: got, today, first, came, ar 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, glock, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, now, safe, home, grandfather 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 9mm, 44, edition 
 Topic 25: range, rifle, shot, think, good 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 66 (approx. per word bound = -6.902, relative change = 4.843e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 67 (approx. per word bound = -6.901, relative change = 5.822e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 68 (approx. per word bound = -6.901, relative change = 5.271e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 69 (approx. per word bound = -6.901, relative change = 4.160e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 70 (approx. per word bound = -6.900, relative change = 4.559e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, time, `, much, good 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, sight 
 Topic 6: `, t, m, can, s 
 Topic 7: 1911, ak, anyone, slide, ` 
 Topic 8: gun, just, dad, years, can 
 Topic 9: anyone, find, looking, know, red 
 Topic 10: got, today, came, ar, old 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, now, safe, home, grandfather 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 9mm, 44, edition 
 Topic 25: range, rifle, first, think, shot 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 71 (approx. per word bound = -6.900, relative change = 4.285e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 72 (approx. per word bound = -6.900, relative change = 3.988e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 73 (approx. per word bound = -6.900, relative change = 3.031e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 74 (approx. per word bound = -6.899, relative change = 3.001e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 75 (approx. per word bound = -6.899, relative change = 3.842e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, much, good, `, want 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, sight 
 Topic 6: `, t, m, s, can 
 Topic 7: 1911, ak, anyone, slide, ` 
 Topic 8: gun, just, dad, years, can 
 Topic 9: anyone, find, looking, know, red 
 Topic 10: got, today, came, ar, old 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, now, safe, gun, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 9mm, 44, edition 
 Topic 25: first, range, rifle, time, think 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 76 (approx. per word bound = -6.899, relative change = 4.084e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 77 (approx. per word bound = -6.898, relative change = 4.451e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 78 (approx. per word bound = -6.898, relative change = 5.332e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 79 (approx. per word bound = -6.898, relative change = 3.847e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 80 (approx. per word bound = -6.898, relative change = 3.125e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, much, good, want, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, sight 
 Topic 6: `, t, m, s, can 
 Topic 7: 1911, ak, anyone, slide, ` 
 Topic 8: gun, just, dad, years, can 
 Topic 9: anyone, find, looking, know, red 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, now, gun, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, 9mm, edition 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 81 (approx. per word bound = -6.897, relative change = 3.004e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 82 (approx. per word bound = -6.897, relative change = 4.578e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 83 (approx. per word bound = -6.897, relative change = 6.255e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 84 (approx. per word bound = -6.896, relative change = 4.989e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 85 (approx. per word bound = -6.896, relative change = 3.211e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: `, s, day, question, safe 
 Topic 3: shooting, much, good, want, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, m, s, ve 
 Topic 7: 1911, ak, anyone, slide, mp5 
 Topic 8: gun, just, dad, years, can 
 Topic 9: anyone, looking, find, know, red 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, s, amp, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, 9mm 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 86 (approx. per word bound = -6.896, relative change = 2.313e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 87 (approx. per word bound = -6.896, relative change = 2.471e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 88 (approx. per word bound = -6.896, relative change = 3.034e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 89 (approx. per word bound = -6.895, relative change = 3.607e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 90 (approx. per word bound = -6.895, relative change = 3.478e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: s, `, day, question, safe 
 Topic 3: shooting, much, good, want, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, m, s, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, dad, years, can 
 Topic 9: anyone, looking, find, know, red 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, wednesday 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, s, amp, auto 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, 9mm 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 91 (approx. per word bound = -6.895, relative change = 2.693e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 92 (approx. per word bound = -6.895, relative change = 3.001e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 93 (approx. per word bound = -6.894, relative change = 3.913e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 94 (approx. per word bound = -6.894, relative change = 3.842e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 95 (approx. per word bound = -6.894, relative change = 2.508e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, `, question, safe 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, m, s, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, dad, years, can 
 Topic 9: looking, anyone, find, know, red 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, auto 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 96 (approx. per word bound = -6.894, relative change = 2.409e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 97 (approx. per word bound = -6.894, relative change = 2.700e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 98 (approx. per word bound = -6.893, relative change = 3.579e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 99 (approx. per word bound = -6.893, relative change = 5.039e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 100 (approx. per word bound = -6.893, relative change = 4.675e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, `, question, safe 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, m, s, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, dad, years, can 
 Topic 9: looking, anyone, find, know, red 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, auto 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 101 (approx. per word bound = -6.892, relative change = 3.879e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 102 (approx. per word bound = -6.892, relative change = 1.769e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 103 (approx. per word bound = -6.892, relative change = 2.100e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 104 (approx. per word bound = -6.892, relative change = 2.206e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 105 (approx. per word bound = -6.892, relative change = 1.498e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, `, question, safe 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, m, s, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, dad, years, can 
 Topic 9: looking, find, anyone, red, know 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, &lt; 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, auto 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, ruger, $, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 106 (approx. per word bound = -6.892, relative change = 1.535e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 107 (approx. per word bound = -6.892, relative change = 2.058e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 108 (approx. per word bound = -6.891, relative change = 2.684e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 109 (approx. per word bound = -6.891, relative change = 3.592e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 110 (approx. per word bound = -6.891, relative change = 3.698e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, `, question, safe 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, dad, can 
 Topic 9: looking, find, anyone, red, know 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, glock 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, auto 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 111 (approx. per word bound = -6.891, relative change = 3.129e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 112 (approx. per word bound = -6.891, relative change = 2.392e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 113 (approx. per word bound = -6.890, relative change = 2.656e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 114 (approx. per word bound = -6.890, relative change = 2.698e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 115 (approx. per word bound = -6.890, relative change = 2.331e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, ` 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, dad, can 
 Topic 9: looking, find, anyone, red, know 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, glock 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, auto 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, 44, edition, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 116 (approx. per word bound = -6.890, relative change = 2.350e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 117 (approx. per word bound = -6.890, relative change = 2.327e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 118 (approx. per word bound = -6.890, relative change = 2.284e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 119 (approx. per word bound = -6.889, relative change = 2.240e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 120 (approx. per word bound = -6.889, relative change = 2.549e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, dad, can 
 Topic 9: looking, find, anyone, red, know 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, edc, carry 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, 44, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 121 (approx. per word bound = -6.889, relative change = 2.879e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 122 (approx. per word bound = -6.889, relative change = 2.421e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 123 (approx. per word bound = -6.889, relative change = 2.771e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 124 (approx. per word bound = -6.889, relative change = 2.865e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 125 (approx. per word bound = -6.888, relative change = 3.200e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, dad, can 
 Topic 9: looking, find, anyone, red, know 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, carry, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, sig, monday 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 126 (approx. per word bound = -6.888, relative change = 2.555e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 127 (approx. per word bound = -6.888, relative change = 2.331e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 128 (approx. per word bound = -6.888, relative change = 2.294e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 129 (approx. per word bound = -6.888, relative change = 2.585e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 130 (approx. per word bound = -6.887, relative change = 3.191e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, dad, can 
 Topic 9: looking, find, anyone, red, know 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, vs, carry, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, sig, monday 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 131 (approx. per word bound = -6.887, relative change = 2.802e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 132 (approx. per word bound = -6.887, relative change = 2.160e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 133 (approx. per word bound = -6.887, relative change = 1.924e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 134 (approx. per word bound = -6.887, relative change = 2.170e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 135 (approx. per word bound = -6.887, relative change = 2.473e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, can, dad 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, pistol, little, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 136 (approx. per word bound = -6.886, relative change = 3.021e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 137 (approx. per word bound = -6.886, relative change = 2.848e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 138 (approx. per word bound = -6.886, relative change = 2.557e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 139 (approx. per word bound = -6.886, relative change = 2.069e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 140 (approx. per word bound = -6.886, relative change = 2.911e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, can, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 141 (approx. per word bound = -6.885, relative change = 3.952e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 142 (approx. per word bound = -6.885, relative change = 1.997e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 143 (approx. per word bound = -6.885, relative change = 1.769e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 144 (approx. per word bound = -6.885, relative change = 1.741e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 145 (approx. per word bound = -6.885, relative change = 1.810e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, can, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 146 (approx. per word bound = -6.885, relative change = 1.562e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 147 (approx. per word bound = -6.885, relative change = 1.269e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 148 (approx. per word bound = -6.885, relative change = 1.010e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 149 (approx. per word bound = -6.885, relative change = 1.091e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 150 (approx. per word bound = -6.885, relative change = 1.006e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, question, safe, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, years, can, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, finally 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 151 (approx. per word bound = -6.884, relative change = 1.179e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 152 (approx. per word bound = -6.884, relative change = 1.407e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 153 (approx. per word bound = -6.884, relative change = 2.080e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 154 (approx. per word bound = -6.884, relative change = 1.839e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 155 (approx. per word bound = -6.884, relative change = 2.040e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, safe, question, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, can, years, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, old 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 156 (approx. per word bound = -6.884, relative change = 1.903e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 157 (approx. per word bound = -6.884, relative change = 1.881e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 158 (approx. per word bound = -6.884, relative change = 1.357e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 159 (approx. per word bound = -6.883, relative change = 1.365e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 160 (approx. per word bound = -6.883, relative change = 1.360e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, safe, question, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, can, years, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, old 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 161 (approx. per word bound = -6.883, relative change = 1.141e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 162 (approx. per word bound = -6.883, relative change = 1.514e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 163 (approx. per word bound = -6.883, relative change = 1.734e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 164 (approx. per word bound = -6.883, relative change = 1.968e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 165 (approx. per word bound = -6.883, relative change = 1.961e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, s, safe, question, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, can, years, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, old 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, colt, buy 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 166 (approx. per word bound = -6.883, relative change = 1.756e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 167 (approx. per word bound = -6.883, relative change = 1.740e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 168 (approx. per word bound = -6.882, relative change = 1.625e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 169 (approx. per word bound = -6.882, relative change = 1.772e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 170 (approx. per word bound = -6.882, relative change = 3.033e-05) 
Topic 1: guns, help, can, gun, happy 
 Topic 2: day, safe, s, question, sights 
 Topic 3: shooting, much, want, good, night 
 Topic 4: can, gun, like, ammo, get 
 Topic 5: barrel, 12, cz, just, gauge 
 Topic 6: `, t, s, m, ve 
 Topic 7: 1911, anyone, ak, slide, mp5 
 Topic 8: gun, just, can, years, guns 
 Topic 9: looking, find, anyone, red, gun 
 Topic 10: got, today, came, ar, old 
 Topic 11: glock, get, like, know, glocks 
 Topic 12: like, 9mm, carry, vs, edc 
 Topic 13: 22, 3, birthday, buy, colt 
 Topic 14: one, like, love, guys, ever 
 Topic 15: =, one, amp, s, gun 
 Topic 16: build, can, little, pistol, lower 
 Topic 17: scam, site, ~, `, amp 
 Topic 18: amp, w, $, ruger, p 
 Topic 19: `, t, s, can, permit 
 Topic 20: =, amp, auto, s, format 
 Topic 21: new, ammo, bought, just, find 
 Topic 22: back, gun, now, safe, home 
 Topic 23: like, know, round, good, use 
 Topic 24: 3d, printed, edition, monday, sig 
 Topic 25: first, range, rifle, time, shooting 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 171 (approx. per word bound = -6.882, relative change = 3.062e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 172 (approx. per word bound = -6.882, relative change = 2.642e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 173 (approx. per word bound = -6.882, relative change = 1.823e-05) 
....................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Model Converged </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/pkg/stm/man/labelTopics.html'>labelTopics</a></span><span class='op'>(</span><span class='va'>myModel</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Topic 1 Top Words:
     Highest Prob: first, like, range, gun, time, 9mm, shooting 
     FREX: &lt;, wednesday, tuesday, scar, politics, sunday, shoulder 
     Lift: 300blk, blank, forgive, italian, lapua, magdump, proud 
     Score: &lt;, wednesday, edition, thread, printed, sunday, scar 
Topic 2 Top Words:
     Highest Prob: 22, just, new, looking, barrel, rifle, gun 
     FREX: 16, 300, gauge, inches, picatinny, shelf, 357 
     Lift: -5.56, -very, -what, #200180, #883, #887, ^ 
     Score: 22, edition, 16, reman, 300, ptr91, prism 
Topic 3 Top Words:
     Highest Prob: one, got, guns, can, gun, get, anyone 
     FREX: gift, grandpa, grandfather, m1, id, im, black 
     Lift: -16.5, -m1, 0.50, 1-4x, 1.35, 1.70, 1100 
     Score: grandpa, faxon, black, grandfather, id, inherited, ship 
Topic 4 Top Words:
     Highest Prob: `, t, s, gun, can, m, ve 
     FREX: license, permit, ll, county, law, waiting, application 
     Lift: _a, _lower, _of, _out, _receiver, _state, _while 
     Score: `, permit, nassau, counties, county, license, t 
Topic 5 Top Words:
     Highest Prob: amp, =, s, gun, just, new, glock 
     FREX: =, format, webp, scam, pjpg, chamber, iron 
     Lift: 1-6, 115, 1986, 3rd, accessible, armalite, bare 
     Score: scam, =, webp, pjpg, format, nbsp, sites </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>myModel_2</span>, type <span class='op'>=</span> <span class='st'>"summary"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-33-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># get the words</span>
<span class='va'>myTopicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/labelTopics.html'>labelTopics</a></span><span class='op'>(</span><span class='va'>myModel_2</span>, n<span class='op'>=</span><span class='fl'>4</span><span class='op'>)</span><span class='op'>$</span><span class='va'>frex</span>

<span class='co'># set up an empty vector</span>
<span class='va'>myTopicLabels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='va'>k</span><span class='op'>)</span>

<span class='co'># set up a loop to go through the topics and collapse the words to a single name</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>myTopicLabels</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>myTopicNames</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span>, collapse <span class='op'>=</span> <span class='st'>"_"</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># print the names</span>
<span class='va'>myTopicLabels</span>
</code></pre>
</div>
<pre><code> [1] &quot;m1_markings_garand_happy&quot;          
 [2] &quot;cannon_day_iron_handed&quot;            
 [3] &quot;training_night_hk91_comfortable&quot;   
 [4] &quot;federal_defensive_munitions_hollow&quot;
 [5] &quot;gauge_cz_12_scorpion&quot;              
 [6] &quot;`_t_ve_m&quot;                          
 [7] &quot;1911_mp5_ak_aug&quot;                   
 [8] &quot;share_owner_dad_gun&quot;               
 [9] &quot;red_dot_holster_find&quot;              
[10] &quot;today_finally_picked_came&quot;         
[11] &quot;glocks_martini_name_business&quot;      
[12] &quot;edc_tp9_elite_vs&quot;                  
[13] &quot;wednesday_birthday_22_870&quot;         
[14] &quot;love_ever_guys_mlok&quot;               
[15] &quot;shelf_lug_wml_shelves&quot;             
[16] &quot;build_lower_receiver_grips&quot;        
[17] &quot;scam_nbsp_~_site&quot;                  
[18] &quot;w_magnum_p_heritage&quot;               
[19] &quot;nassau_counties_permit_ll&quot;         
[20] &quot;=_auto_h_pjpg&quot;                     
[21] &quot;clips_new_girlfriend_purchased&quot;    
[22] &quot;cowboy_passed_faxon_sent&quot;          
[23] &quot;suppressor_thermal_cases_atlas&quot;    
[24] &quot;monday_printed_3d_nagant&quot;          
[25] &quot;first_range_rifle_time&quot;            </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>modelEffects</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/stm/man/estimateEffect.html'>estimateEffect</a></span><span class='op'>(</span>formula<span class='op'>=</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>~</span><span class='va'>comments</span>, 
        stmobj <span class='op'>=</span> <span class='va'>myModel_2</span>, 
        metadata <span class='op'>=</span> <span class='va'>whole_data_frame_unique_empty</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># estimate effects</span>

<span class='co'># plot effects</span>

<span class='va'>myRows</span> <span class='op'>&lt;-</span> <span class='fl'>4</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>myRows</span>,<span class='fl'>3</span><span class='op'>)</span>, bty<span class='op'>=</span><span class='st'>"n"</span>, lwd<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>k</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/pkg/stm/man/plot.estimateEffect.html'>plot.estimateEffect</a></span><span class='op'>(</span><span class='va'>modelEffects</span>, 
        covariate <span class='op'>=</span><span class='st'>"comments"</span>,  
        xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>.25</span>,<span class='fl'>.25</span><span class='op'>)</span>, 
        model <span class='op'>=</span> <span class='va'>myModel_2</span>, 
        topics <span class='op'>=</span> <span class='va'>modelEffects</span><span class='op'>$</span><span class='va'>topics</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, 
        method <span class='op'>=</span> <span class='st'>"difference"</span>, 
        cov.value1 <span class='op'>=</span> <span class='fl'>1</span>, 
        cov.value2<span class='op'>=</span><span class='fl'>0</span>, 
        main <span class='op'>=</span> <span class='va'>myTopicLabels</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, 
        printlegend<span class='op'>=</span><span class='cn'>F</span>, 
        linecol<span class='op'>=</span><span class='st'>"grey26"</span>, 
        labeltype<span class='op'>=</span><span class='st'>"custom"</span>, 
        verbose.labels<span class='op'>=</span><span class='cn'>F</span>, 
        custom.labels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>new<span class='op'>=</span><span class='cn'>F</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>topicmodels</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>


<span class='co'># load stopwords</span>
<span class='va'>english_stopwords</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/readLines.html'>readLines</a></span><span class='op'>(</span><span class='st'>"https://slcladal.github.io/resources/stopwords_en.txt"</span>, encoding <span class='op'>=</span> <span class='st'>"UTF-8"</span><span class='op'>)</span>

<span class='co'># create corpus object</span>
<span class='va'>textdata</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>doc_id<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/row.names.html'>row.names</a></span><span class='op'>(</span><span class='va'>whole_data_frame_unique</span><span class='op'>)</span>,
                       text<span class='op'>=</span><span class='va'>whole_data_frame_unique</span><span class='op'>$</span><span class='va'>all_text</span><span class='op'>)</span>
<span class='va'>corpus</span> <span class='op'>&lt;-</span> <span class='fu'>Corpus</span><span class='op'>(</span><span class='fu'>DataframeSource</span><span class='op'>(</span><span class='va'>textdata</span><span class='op'>)</span><span class='op'>)</span>




<span class='co'># Preprocessing chain</span>

<span class='va'>processedCorpus_guns</span> <span class='op'>&lt;-</span> <span class='fu'>tm_map</span><span class='op'>(</span><span class='va'>corpus</span>, <span class='fu'>content_transformer</span><span class='op'>(</span><span class='va'>tolower</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>processedCorpus_guns</span> <span class='op'>&lt;-</span> <span class='fu'>tm_map</span><span class='op'>(</span><span class='va'>processedCorpus_guns</span>, <span class='va'>removeWords</span>, <span class='va'>english_stopwords</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>minimumFrequency</span> <span class='op'>&lt;-</span> <span class='fl'>5</span>

<span class='va'>DTM</span> <span class='op'>&lt;-</span> <span class='fu'>DocumentTermMatrix</span><span class='op'>(</span><span class='va'>processedCorpus_guns</span>, control <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>bounds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>global <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>minimumFrequency</span>, <span class='cn'>Inf</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 2711 1319</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sel_idx</span> <span class='op'>&lt;-</span> <span class='fu'>slam</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/slam/man/sums.html'>row_sums</a></span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span>
<span class='va'>DTM</span> <span class='op'>&lt;-</span> <span class='va'>DTM</span><span class='op'>[</span><span class='va'>sel_idx</span>, <span class='op'>]</span>

<span class='va'>textdata</span> <span class='op'>&lt;-</span> <span class='va'>textdata</span><span class='op'>[</span><span class='va'>sel_idx</span>, <span class='op'>]</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>result</span> <span class='op'>&lt;-</span> <span class='fu'>ldatuning</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ldatuning/man/FindTopicsNumber.html'>FindTopicsNumber</a></span><span class='op'>(</span>
  <span class='va'>DTM</span>,
  topics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='fl'>2</span>, to <span class='op'>=</span> <span class='fl'>20</span>, by <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
  metrics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"CaoJuan2009"</span>,  <span class='st'>"Deveaud2014"</span><span class='op'>)</span>,
  method <span class='op'>=</span> <span class='st'>"Gibbs"</span>,
  control <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>77</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>
</code></pre>
</div>
<pre><code>fit models... done.
calculate metrics:
  CaoJuan2009... done.
  Deveaud2014... done.</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>FindTopicsNumber_plot</span><span class='op'>(</span><span class='va'>result</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-43-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># number of topics</span>
<span class='va'>K</span> <span class='op'>&lt;-</span> <span class='fl'>20</span>
<span class='co'># set random number generator seed</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>9161</span><span class='op'>)</span>
<span class='co'># compute the LDA model, inference via 1000 iterations of Gibbs sampling</span>
<span class='va'>topicModel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/topicmodels/man/lda.html'>LDA</a></span><span class='op'>(</span><span class='va'>DTM</span>, <span class='va'>K</span>, method<span class='op'>=</span><span class='st'>"Gibbs"</span>, control<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>iter <span class='op'>=</span> <span class='fl'>500</span>, verbose <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>K = 20; V = 1319; M = 2424
Sampling 500 iterations!
Iteration 25 ...
Iteration 50 ...
Iteration 75 ...
Iteration 100 ...
Iteration 125 ...
Iteration 150 ...
Iteration 175 ...
Iteration 200 ...
Iteration 225 ...
Iteration 250 ...
Iteration 275 ...
Iteration 300 ...
Iteration 325 ...
Iteration 350 ...
Iteration 375 ...
Iteration 400 ...
Iteration 425 ...
Iteration 450 ...
Iteration 475 ...
Iteration 500 ...
Gibbs sampling completed!</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># have a look a some of the results (posterior distributions)</span>
<span class='va'>tmResult</span> <span class='op'>&lt;-</span> <span class='fu'>posterior</span><span class='op'>(</span><span class='va'>topicModel</span><span class='op'>)</span>
<span class='co'># format of the resulting object</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$names
[1] &quot;terms&quot;  &quot;topics&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>


<span class='fu'>nTerms</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span>              <span class='co'># lengthOfVocab</span>
</code></pre>
</div>
<pre><code>[1] 1319</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># topics are probability distribtions over the entire vocabulary</span>
<span class='va'>beta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span>   <span class='co'># get beta from results</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span>                <span class='co'># K distributions over nTerms(DTM) terms</span>
</code></pre>
</div>
<pre><code>[1]   20 1319</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code> 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 
 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span>               <span class='co'># size of collection</span>
</code></pre>
</div>
<pre><code>[1] 2424</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>theta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>topics</span> 

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>[1] 2424   20</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1      Topic 2     Topic 3           Topic 4  
 [1,] &quot;wondering&quot;  &quot;range&quot;     &quot;guns&quot;            &quot;pistol&quot; 
 [2,] &quot;day&quot;        &quot;time&quot;      &quot;shot&quot;            &quot;sig&quot;    
 [3,] &quot;left&quot;       &quot;ammo&quot;      &quot;feel&quot;            &quot;carry&quot;  
 [4,] &quot;trigger&quot;    &quot;bought&quot;    &quot;small&quot;           &quot;holster&quot;
 [5,] &quot;question&quot;   &quot;years&quot;     &quot;...&quot;             &quot;mags&quot;   
 [6,] &quot;original&quot;   &quot;shooting&quot;  &quot;recently&quot;        &quot;steel&quot;  
 [7,] &quot;understand&quot; &quot;stuff&quot;     &quot;recommendations&quot; &quot;idea&quot;   
 [8,] &quot;scorpion&quot;   &quot;box&quot;       &quot;ago&quot;             &quot;1911&quot;   
 [9,] &quot;late&quot;       &quot;online&quot;    &quot;learn&quot;           &quot;options&quot;
[10,] &quot;easy&quot;       &quot;questions&quot; &quot;told&quot;            &quot;safe&quot;   
      Topic 5     Topic 6  Topic 7    Topic 8   Topic 9    Topic 10  
 [1,] &quot;put&quot;       &quot;red&quot;    &quot;fit&quot;      &quot;don`&quot;    &quot;firearm&quot;  &quot;find&quot;    
 [2,] &quot;slide&quot;     &quot;sights&quot; &quot;ar15&quot;     &quot;pistol&quot;  &quot;people&quot;   &quot;good&quot;    
 [3,] &quot;`ve&quot;       &quot;optic&quot;  &quot;tactical&quot; &quot;gonna&quot;   &quot;firearms&quot; &quot;shooting&quot;
 [4,] &quot;back&quot;      &quot;dot&quot;    &quot;front&quot;    &quot;`ll&quot;     &quot;make&quot;     &quot;shoot&quot;   
 [5,] &quot;question&quot;  &quot;mount&quot;  &quot;made&quot;     &quot;carry&quot;   &quot;site&quot;     &quot;found&quot;   
 [6,] &quot;hammer&quot;    &quot;scope&quot;  &quot;spring&quot;   &quot;license&quot; &quot;good&quot;     &quot;shotgun&quot; 
 [7,] &quot;curious&quot;   &quot;iron&quot;   &quot;great&quot;    &quot;police&quot;  &quot;long&quot;     &quot;make&quot;    
 [8,] &quot;picked&quot;    &quot;sight&quot;  &quot;rail&quot;     &quot;fucking&quot; &quot;feel&quot;     &quot;gauge&quot;   
 [9,] &quot;doesn`&quot;    &quot;rear&quot;   &quot;gas&quot;      &quot;thing&quot;   &quot;give&quot;     &quot;hey&quot;     
[10,] &quot;chambered&quot; &quot;asked&quot;  &quot;pin&quot;      &quot;conceal&quot; &quot;makes&quot;    &quot;hard&quot;    
      Topic 11  Topic 12  Topic 13   Topic 14  Topic 15  Topic 16
 [1,] &quot;glock&quot;   &quot;ruger&quot;   &quot;gun&quot;      &quot;9mm&quot;     &quot;rifle&quot;   &quot;gun&quot;   
 [2,] &quot;full&quot;    &quot;post&quot;    &quot;buy&quot;      &quot;heard&quot;   &quot;hunting&quot; &quot;wanted&quot;
 [3,] &quot;grip&quot;    &quot;edition&quot; &quot;home&quot;     &quot;good&quot;    &quot;case&quot;    &quot;psa&quot;   
 [4,] &quot;auto&quot;    &quot;finally&quot; &quot;purchase&quot; &quot;pretty&quot;  &quot;.22&quot;     &quot;stock&quot; 
 [5,] &quot;model&quot;   &quot;carbine&quot; &quot;check&quot;    &quot;problem&quot; &quot;live&quot;    &quot;thing&quot; 
 [6,] &quot;smith&quot;   &quot;price&quot;   &quot;lot&quot;      &quot;bit&quot;     &quot;target&quot;  &quot;find&quot;  
 [7,] &quot;wesson&quot;  &quot;worth&quot;   &quot;defense&quot;  &quot;spend&quot;   &quot;300&quot;     &quot;1911&quot;  
 [8,] &quot;defense&quot; &quot;beretta&quot; &quot;state&quot;    &quot;rifles&quot;  &quot;made&quot;    &quot;gift&quot;  
 [9,] &quot;size&quot;    &quot;thread&quot;  &quot;point&quot;    &quot;bullet&quot;  &quot;range&quot;   &quot;made&quot;  
[10,] &quot;glocks&quot;  &quot;mark&quot;    &quot;buying&quot;   &quot;advice&quot;  &quot;build&quot;   &quot;hear&quot;  
      Topic 17   Topic 18  Topic 19 Topic 20   
 [1,] &quot;round&quot;    &quot;&amp;amp;&quot;   &quot;today&quot;  &quot;barrel&quot;   
 [2,] &quot;back&quot;     &quot;10mm&quot;    &quot;buy&quot;    &quot;work&quot;     
 [3,] &quot;mag&quot;      &quot;build&quot;   &quot;gun.&quot;   &quot;long&quot;     
 [4,] &quot;rounds&quot;   &quot;real&quot;    &quot;lower&quot;  &quot;inch&quot;     
 [5,] &quot;bolt&quot;     &quot;9mm&quot;     &quot;parts&quot;  &quot;question&quot; 
 [6,] &quot;magazine&quot; &quot;fun&quot;     &quot;safe&quot;   &quot;thinking&quot; 
 [7,] &quot;handle&quot;   &quot;5.56&quot;    &quot;love&quot;   &quot;wondering&quot;
 [8,] &quot;clean&quot;    &quot;option&quot;  &quot;couple&quot; &quot;upper&quot;    
 [9,] &quot;action&quot;   &quot;running&quot; &quot;guy&quot;    &quot;cheap&quot;    
[10,] &quot;brass&quot;    &quot;told&quot;    &quot;set&quot;    &quot;guess&quot;    </code></pre>
</div>
<p>Here we have actually distinguished a couple of groups that might be
useful, 14 is the only one with defense, and 17 is the only one with
hunting. 1, 7, 11, involve the word range within their topic. Carry is
only found in group 8. This would indicate that the term is the in the
top 10 in these groups. These are listed on their own below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>exampleTermData</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>exampleTermData</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>7</span>,<span class='fl'>8</span>, <span class='fl'>11</span>,<span class='fl'>17</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>      Topic 1      Topic 7    Topic 8   Topic 11  Topic 17  
 [1,] &quot;wondering&quot;  &quot;fit&quot;      &quot;don`&quot;    &quot;glock&quot;   &quot;round&quot;   
 [2,] &quot;day&quot;        &quot;ar15&quot;     &quot;pistol&quot;  &quot;full&quot;    &quot;back&quot;    
 [3,] &quot;left&quot;       &quot;tactical&quot; &quot;gonna&quot;   &quot;grip&quot;    &quot;mag&quot;     
 [4,] &quot;trigger&quot;    &quot;front&quot;    &quot;`ll&quot;     &quot;auto&quot;    &quot;rounds&quot;  
 [5,] &quot;question&quot;   &quot;made&quot;     &quot;carry&quot;   &quot;model&quot;   &quot;bolt&quot;    
 [6,] &quot;original&quot;   &quot;spring&quot;   &quot;license&quot; &quot;smith&quot;   &quot;magazine&quot;
 [7,] &quot;understand&quot; &quot;great&quot;    &quot;police&quot;  &quot;wesson&quot;  &quot;handle&quot;  
 [8,] &quot;scorpion&quot;   &quot;rail&quot;     &quot;fucking&quot; &quot;defense&quot; &quot;clean&quot;   
 [9,] &quot;late&quot;       &quot;gas&quot;      &quot;thing&quot;   &quot;size&quot;    &quot;action&quot;  
[10,] &quot;easy&quot;       &quot;pin&quot;      &quot;conceal&quot; &quot;glocks&quot;  &quot;brass&quot;   </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>top5termsPerTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>top5termsPerTopic</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span>

<span class='va'>topicNames</span>
</code></pre>
</div>
<pre><code>                              Topic 1 
&quot;wondering day left trigger question&quot; 
                              Topic 2 
       &quot;range time ammo bought years&quot; 
                              Topic 3 
           &quot;guns shot feel small ...&quot; 
                              Topic 4 
      &quot;pistol sig carry holster mags&quot; 
                              Topic 5 
        &quot;put slide `ve back question&quot; 
                              Topic 6 
         &quot;red sights optic dot mount&quot; 
                              Topic 7 
       &quot;fit ar15 tactical front made&quot; 
                              Topic 8 
        &quot;don` pistol gonna `ll carry&quot; 
                              Topic 9 
  &quot;firearm people firearms make site&quot; 
                             Topic 10 
     &quot;find good shooting shoot found&quot; 
                             Topic 11 
         &quot;glock full grip auto model&quot; 
                             Topic 12 
 &quot;ruger post edition finally carbine&quot; 
                             Topic 13 
        &quot;gun buy home purchase check&quot; 
                             Topic 14 
      &quot;9mm heard good pretty problem&quot; 
                             Topic 15 
        &quot;rifle hunting case .22 live&quot; 
                             Topic 16 
         &quot;gun wanted psa stock thing&quot; 
                             Topic 17 
         &quot;round back mag rounds bolt&quot; 
                             Topic 18 
          &quot;&amp;amp; 10mm build real 9mm&quot; 
                             Topic 19 
         &quot;today buy gun. lower parts&quot; 
                             Topic 20 
     &quot;barrel work long inch question&quot; </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>1</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>FALSE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-54-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>2</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>FALSE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>928</span><span class='op'>)</span>

<span class='va'>samples</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span><span class='op'>(</span><span class='fl'>2424</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>exampleIds</span> <span class='op'>&lt;-</span> <span class='va'>samples</span>

<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>processedCorpus_guns</span><span class='op'>[</span><span class='va'>exampleIds</span><span class='op'>]</span>, <span class='va'>as.character</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$`2701`
[1] &quot;    gun question,   accessory question involving  wild dog   goat.   past 3 years  spent $2500ish  streamlight lights.  styles,  handhelds,  tlr pistol lights   rifle light,    work.   recent tlr8a     killed   real defense situation,  wild dog    goat pen   tearing   ,   barely    thought \&quot;hell yeah ill draw  glock, light   situation  put  dog .\&quot;   happen   planned,  drew   light  barely flickered   poor goat   barely    eviscerated.  bought  light 2 months ago    fresh batteries make  change,      giving   money? idk.    good lighting options    surefire price     depend    worse scenario?&quot;

$`3361`
[1] &quot;folder friday ( tbh  gotta ditch  brace) &quot;

$`997`
[1] &quot; son (12) shooting 9mm    time (imi jericho 941f) &quot;

$`5292`
[1] &quot;  born  mexico city    citizen   greatest country  human history  2015. ,  wasn` officially baptized   full blown merican  4/17/18   bought   gun.  figured      place  share . &quot;

$`6211`
[1] &quot; bought  gun  29 months.  csx  dis? &quot;

$`108`
[1] &quot;    gauge shotgun  home defense? hey .     site.      violates  rule  open ended questions.    purchase  pump action shotgun    intend     home defense.   18\&quot; barrel,    shortest  state  .  question     12 gauge  20?   multiple cases made   size      unsure.  shot  12 gauge ,      expect  recoil. &#39;  price  availability  20  12?  insight    appreciated!edit:  ended     12 gauge.    recommendations.&quot;

$`521`
[1] &quot; dog  walk &quot;

$`1631`
[1] &quot;milled aks &amp;gt; &quot;

$`2941`
[1] &quot;`yeah  grab  jacket    closet\035 &quot;

$`589`
[1] &quot;elk gun question  elk hunting benelli lupo  kimber hunter?   round 270  308  6.5 creedmoor? &quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>N</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>exampleIds</span><span class='op'>)</span>

<span class='co'># get topic proportions form example documents</span>
<span class='va'>topicProportionExamples</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>exampleIds</span>,<span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='va'>vizDataFrame</span> <span class='op'>&lt;-</span> <span class='fu'>melt</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span>, document <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span>, variable.name <span class='op'>=</span> <span class='st'>"topic"</span>, id.vars <span class='op'>=</span> <span class='st'>"document"</span><span class='op'>)</span>  
<span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>vizDataFrame</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>topic</span>, <span class='va'>value</span>, fill <span class='op'>=</span> <span class='va'>document</span><span class='op'>)</span>, ylab <span class='op'>=</span> <span class='st'>"proportion"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>  
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>document</span>, ncol <span class='op'>=</span> <span class='va'>N</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-57-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'>lda</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lda/man/top.topic.words.html'>top.topic.words</a></span><span class='op'>(</span><span class='va'>beta</span>, <span class='fl'>5</span>, by.score <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># What are the most probable topics in the entire collection?</span>
<span class='va'>topicProportions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> <span class='op'>/</span> <span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span> 
<span class='co'># mean probablities over all paragraphs</span>

<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>topicProportions</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>     

<span class='co'># assign the topic names we created before</span>

<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>         round mag back rounds bolt 
                         0.05071515 
    time range ammo bought shooting 
                         0.05053655 
   ruger post edition carbine price 
                         0.05034316 
         gun wanted psa thing stock 
                         0.05033434 
      heard 9mm pretty good problem 
                         0.05027065 
     find shooting good shoot found 
                         0.05022805 
        gun buy home check purchase 
                         0.05017900 
           guns shot feel small ... 
                         0.05009009 
      pistol sig holster carry mags 
                         0.05001924 
          &amp;amp; 10mm build real fun 
                         0.04998741 
        slide put `ve back question 
                         0.04997109 
         red sights optic mount dot 
                         0.04995775 
     barrel work inch long question 
                         0.04993557 
       ar15 front tactical fit rail 
                         0.04989761 
         today gun. lower buy parts 
                         0.04978300 
         glock full grip auto model 
                         0.04974574 
wondering day left trigger original 
                         0.04965218 
  firearm people firearms site long 
                         0.04964950 
     rifle hunting case target live 
                         0.04960062 
      don` pistol gonna `ll license 
                         0.04910329 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># show summed proportions in decreased order</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>soP</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>soP</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>soP</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;0.05072 : round mag back rounds bolt&quot;         
 [2] &quot;0.05054 : time range ammo bought shooting&quot;    
 [3] &quot;0.05034 : ruger post edition carbine price&quot;   
 [4] &quot;0.05033 : gun wanted psa thing stock&quot;         
 [5] &quot;0.05027 : heard 9mm pretty good problem&quot;      
 [6] &quot;0.05023 : find shooting good shoot found&quot;     
 [7] &quot;0.05018 : gun buy home check purchase&quot;        
 [8] &quot;0.05009 : guns shot feel small ...&quot;           
 [9] &quot;0.05002 : pistol sig holster carry mags&quot;      
[10] &quot;0.04999 : &amp;amp; 10mm build real fun&quot;          
[11] &quot;0.04997 : slide put `ve back question&quot;        
[12] &quot;0.04996 : red sights optic mount dot&quot;         
[13] &quot;0.04994 : barrel work inch long question&quot;     
[14] &quot;0.0499 : ar15 front tactical fit rail&quot;        
[15] &quot;0.04978 : today gun. lower buy parts&quot;         
[16] &quot;0.04975 : glock full grip auto model&quot;         
[17] &quot;0.04965 : wondering day left trigger original&quot;
[18] &quot;0.04965 : firearm people firearms site long&quot;  
[19] &quot;0.0496 : rifle hunting case target live&quot;      
[20] &quot;0.0491 : don` pistol gonna `ll license&quot;       </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>countsOfPrimaryTopics</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>K</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>topicsPerDoc</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>i</span>, <span class='op'>]</span> <span class='co'># select topic distribution for document i</span>
  <span class='co'># get first element position from ordered list</span>
  <span class='va'>primaryTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>topicsPerDoc</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> 
  <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>+</span> <span class='fl'>1</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>wondering day left trigger original 
                                224 
    time range ammo bought shooting 
                                209 
           guns shot feel small ... 
                                201 
      pistol sig holster carry mags 
                                169 
   ruger post edition carbine price 
                                149 
       ar15 front tactical fit rail 
                                141 
        slide put `ve back question 
                                138 
         red sights optic mount dot 
                                131 
         glock full grip auto model 
                                123 
     find shooting good shoot found 
                                108 
      don` pistol gonna `ll license 
                                101 
         gun wanted psa thing stock 
                                100 
  firearm people firearms site long 
                                 93 
      heard 9mm pretty good problem 
                                 90 
         round mag back rounds bolt 
                                 85 
        gun buy home check purchase 
                                 81 
     rifle hunting case target live 
                                 76 
          &amp;amp; 10mm build real fun 
                                 71 
         today gun. lower buy parts 
                                 69 
     barrel work inch long question 
                                 65 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>so</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>so</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;224 : wondering day left trigger original&quot;
 [2] &quot;209 : time range ammo bought shooting&quot;    
 [3] &quot;201 : guns shot feel small ...&quot;           
 [4] &quot;169 : pistol sig holster carry mags&quot;      
 [5] &quot;149 : ruger post edition carbine price&quot;   
 [6] &quot;141 : ar15 front tactical fit rail&quot;       
 [7] &quot;138 : slide put `ve back question&quot;        
 [8] &quot;131 : red sights optic mount dot&quot;         
 [9] &quot;123 : glock full grip auto model&quot;         
[10] &quot;108 : find shooting good shoot found&quot;     
[11] &quot;101 : don` pistol gonna `ll license&quot;      
[12] &quot;100 : gun wanted psa thing stock&quot;         
[13] &quot;93 : firearm people firearms site long&quot;   
[14] &quot;90 : heard 9mm pretty good problem&quot;       
[15] &quot;85 : round mag back rounds bolt&quot;          
[16] &quot;81 : gun buy home check purchase&quot;         
[17] &quot;76 : rifle hunting case target live&quot;      
[18] &quot;71 : &amp;amp; 10mm build real fun&quot;           
[19] &quot;69 : today gun. lower buy parts&quot;          
[20] &quot;65 : barrel work inch long question&quot;      </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>20</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>countsOfPrimaryTopics</span>,  
                                 fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span><span class='op'>+</span>  <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span>, size<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>,legend.key.size <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key size</span>
        legend.key.height <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key height</span>
        legend.key.width <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>,<span class='op'>)</span> <span class='op'>+</span>  
<span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span> 
  <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-63-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>?</span><span class='va'>theme</span>
</code></pre>
</div>
</div>
<h3 id="major-topics-visualization">Major Topics Visualization</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>df_for_visualization</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span> , <span class='fl'>7</span> , <span class='fl'>8</span> , <span class='fl'>11</span> , <span class='fl'>17</span><span class='op'>)</span>,<span class='op'>]</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>7</span>,<span class='fl'>8</span>, <span class='fl'>11</span>,<span class='fl'>17</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>7</span>,<span class='fl'>8</span>,<span class='fl'>11</span>,<span class='fl'>17</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization_relevant</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>`df_for_visualization[c(1, 7, 8, 11, 17), ]`</span>,  fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span> <span class='op'>+</span>    
  <span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>   <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>scale_x_discrete</span><span class='op'>(</span>guide <span class='op'>=</span> <span class='fu'>guide_axis</span><span class='op'>(</span>n.dodge <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<h3 id="continuing-n-grams-from-office-hours">Continuing n-grams from
office hours</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#processedCorpus_guns &lt;- tm_map(corpus, content_transformer(tolower))</span>
<span class='co'>#processedCorpus_guns &lt;- tm_map(processedCorpus_guns, removeWords, english_stopwords)</span>


<span class='va'>my_words</span><span class='op'>&lt;-</span> <span class='va'>vocab_whole_df</span><span class='op'>$</span><span class='va'>term</span>

<span class='va'>BigramTokenizer</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'>ngrams</span><span class='op'>(</span><span class='fu'>words</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='va'>paste</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span>, use.names <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>dtm_ngram</span> <span class='op'>&lt;-</span> <span class='fu'>DocumentTermMatrix</span><span class='op'>(</span><span class='va'>processedCorpus_guns</span>, control<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>tokenizer <span class='op'>=</span> <span class='va'>BigramTokenizer</span>, dictionary <span class='op'>=</span> <span class='va'>my_words</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># dtm_ngram &lt;- DocumentTermMatrix(model, control=list(tokenize = BigramTokenizer, wordLengths=c(1,Inf))) </span>
 
<span class='fu'>inspect</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;&lt;DocumentTermMatrix (documents: 2711, terms: 8107)&gt;&gt;
Non-/sparse entries: 23771/21954306
Sparsity           : 100%
Maximal term length: 48
Weighting          : term frequency (tf)
Sample             :
      Terms
Docs   back buy find good gun guns pistol range rifle time
  1161    0   0    1    4   2    0      0     0     0    1
  2461    1   0    1    1   4    0      0     2     0    1
  277     0   0    0    1   4    1      0     0     0    1
  2831    1   0    0    1   8    0      0     0     0    0
  439     0   2    0    2   2    4      3     1     0    1
  4421    0   3    0    0   1    0      0     0     0    1
  4502    2   1    0    0   2    3      0     0     0    0
  465     0   0    1    1   4    0      3     3     1    2
  4822    5   9    2    2  16    2     18     2     0    7
  7302    1  11    3    7  31    4      5     3     3    4</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>data_corpus</span> <span class='op'>=</span> <span class='fu'>VCorpus</span><span class='op'>(</span><span class='fu'>DataframeSource</span><span class='op'>(</span><span class='va'>textdata</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>NLP_tokenizer</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'>ngrams</span><span class='op'>(</span><span class='fu'>words</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='va'>paste</span>, collapse <span class='op'>=</span> <span class='st'>"_"</span><span class='op'>)</span>, use.names <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>control_list_ngram</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>tokenize <span class='op'>=</span> <span class='va'>NLP_tokenizer</span>,
                          removePunctuation <span class='op'>=</span> <span class='cn'>TRUE</span>,
                          removeNumbers <span class='op'>=</span> <span class='cn'>FALSE</span>, 
                          stopwords <span class='op'>=</span> <span class='fu'>stopwords</span><span class='op'>(</span><span class='st'>"english"</span><span class='op'>)</span>, 
                          tolower <span class='op'>=</span> <span class='cn'>T</span>, 
                          stemming <span class='op'>=</span> <span class='cn'>F</span>
                          <span class='op'>)</span>

<span class='va'>dtm_ngram</span> <span class='op'>&lt;-</span> <span class='fu'>DocumentTermMatrix</span><span class='op'>(</span><span class='va'>data_corpus</span>, <span class='va'>control_list_ngram</span><span class='op'>)</span>

<span class='va'>removeCommonTerms</span> <span class='op'>&lt;-</span> <span class='kw'>function</span> <span class='op'>(</span><span class='va'>x</span>, <span class='va'>pct</span><span class='op'>)</span> 
<span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>inherits</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"DocumentTermMatrix"</span>, <span class='st'>"TermDocumentMatrix"</span><span class='op'>)</span><span class='op'>)</span>, 
        <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>is.numeric</a></span><span class='op'>(</span><span class='va'>pct</span><span class='op'>)</span>, <span class='va'>pct</span> <span class='op'>&gt;</span> <span class='fl'>0</span>, <span class='va'>pct</span> <span class='op'>&lt;</span> <span class='fl'>1</span><span class='op'>)</span>
    <span class='va'>m</span> <span class='op'>&lt;-</span> <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>inherits</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"DocumentTermMatrix"</span><span class='op'>)</span><span class='op'>)</span> 
        <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
    <span class='kw'>else</span> <span class='va'>x</span>
    <span class='va'>t</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>$</span><span class='va'>i</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='va'>m</span><span class='op'>$</span><span class='va'>ncol</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>pct</span><span class='op'>)</span>
    <span class='va'>termIndex</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>t</span><span class='op'>[</span><span class='va'>t</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
    <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>inherits</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"DocumentTermMatrix"</span><span class='op'>)</span><span class='op'>)</span> 
        <span class='va'>x</span><span class='op'>[</span>, <span class='va'>termIndex</span><span class='op'>]</span>
    <span class='kw'>else</span> <span class='va'>x</span><span class='op'>[</span><span class='va'>termIndex</span>, <span class='op'>]</span>
<span class='op'>}</span>

<span class='va'>dtm_ngram</span><span class='op'>&lt;-</span><span class='fu'>removeCommonTerms</span><span class='op'>(</span><span class='va'>dtm_ngram</span>, <span class='fl'>.2</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  2424 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sel_idx</span> <span class='op'>&lt;-</span> <span class='fu'>slam</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/slam/man/sums.html'>row_sums</a></span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span>
<span class='va'>dtm_ngram</span> <span class='op'>&lt;-</span> <span class='va'>dtm_ngram</span><span class='op'>[</span><span class='va'>sel_idx</span>, <span class='op'>]</span>

<span class='va'>textdata</span> <span class='op'>&lt;-</span> <span class='va'>textdata</span><span class='op'>[</span><span class='va'>sel_idx</span>, <span class='op'>]</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>result</span> <span class='op'>&lt;-</span> <span class='fu'>ldatuning</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ldatuning/man/FindTopicsNumber.html'>FindTopicsNumber</a></span><span class='op'>(</span>
  <span class='va'>dtm_ngram</span>,
  topics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='fl'>2</span>, to <span class='op'>=</span> <span class='fl'>20</span>, by <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
  metrics <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"CaoJuan2009"</span>,  <span class='st'>"Deveaud2014"</span><span class='op'>)</span>,
  method <span class='op'>=</span> <span class='st'>"Gibbs"</span>,
  control <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>77</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>
</code></pre>
</div>
<pre><code>fit models... done.
calculate metrics:
  CaoJuan2009... done.
  Deveaud2014... done.</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>FindTopicsNumber_plot</span><span class='op'>(</span><span class='va'>result</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-70-1.png" width="624" /></p>
</div>
<h3 id="topics">20 Topics</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># number of topics</span>
<span class='va'>K</span> <span class='op'>&lt;-</span> <span class='fl'>20</span>
<span class='co'># set random number generator seed</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>9161</span><span class='op'>)</span>
<span class='co'># compute the LDA model, inference via 1000 iterations of Gibbs sampling</span>
<span class='va'>topicModel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/topicmodels/man/lda.html'>LDA</a></span><span class='op'>(</span><span class='va'>dtm_ngram</span>, <span class='va'>K</span>, method<span class='op'>=</span><span class='st'>"Gibbs"</span>, control<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>iter <span class='op'>=</span> <span class='fl'>500</span>, verbose <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>K = 20; V = 57538; M = 2424
Sampling 500 iterations!
Iteration 25 ...
Iteration 50 ...
Iteration 75 ...
Iteration 100 ...
Iteration 125 ...
Iteration 150 ...
Iteration 175 ...
Iteration 200 ...
Iteration 225 ...
Iteration 250 ...
Iteration 275 ...
Iteration 300 ...
Iteration 325 ...
Iteration 350 ...
Iteration 375 ...
Iteration 400 ...
Iteration 425 ...
Iteration 450 ...
Iteration 475 ...
Iteration 500 ...
Gibbs sampling completed!</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># have a look a some of the results (posterior distributions)</span>
<span class='va'>tmResult</span> <span class='op'>&lt;-</span> <span class='fu'>posterior</span><span class='op'>(</span><span class='va'>topicModel</span><span class='op'>)</span>
<span class='co'># format of the resulting object</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$names
[1] &quot;terms&quot;  &quot;topics&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>


<span class='fu'>nTerms</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>              <span class='co'># lengthOfVocab</span>
</code></pre>
</div>
<pre><code>[1] 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># topics are probability distribtions over the entire vocabulary</span>
<span class='va'>beta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span>   <span class='co'># get beta from results</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span>                <span class='co'># K distributions over nTerms(DTM) terms</span>
</code></pre>
</div>
<pre><code>[1]    20 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code> 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 
 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>               <span class='co'># size of collection</span>
</code></pre>
</div>
<pre><code>[1] 2424</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>theta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>topics</span> 

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>[1] 2424   20</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1       Topic 2  Topic 3   Topic 4    Topic 5    Topic 6 
 [1,] &quot;gun&quot;         &quot;ammo&quot;   &quot;gun&quot;     &quot;gun&quot;      &quot;scam&quot;     &quot;red&quot;   
 [2,] &quot;defense&quot;     &quot;new&quot;    &quot;ever&quot;    &quot;full&quot;     &quot;site&quot;     &quot;sights&quot;
 [3,] &quot;home&quot;        &quot;round&quot;  &quot;edition&quot; &quot;just&quot;     &quot;couldnt&quot;  &quot;dot&quot;   
 [4,] &quot;shotgun&quot;     &quot;rounds&quot; &quot;one&quot;     &quot;auto&quot;     &quot;shop&quot;     &quot;ona&quot;   
 [5,] &quot;homedefense&quot; &quot;bought&quot; &quot;post&quot;    &quot;fun&quot;      &quot;firearms&quot; &quot;optic&quot; 
 [6,] &quot;ammo&quot;        &quot;just&quot;   &quot;home&quot;    &quot;iam&quot;      &quot;look&quot;     &quot;reddot&quot;
 [7,] &quot;forhome&quot;     &quot;mag&quot;    &quot;thread&quot;  &quot;formy&quot;    &quot;use&quot;      &quot;mount&quot; 
 [8,] &quot;gauge&quot;       &quot;back&quot;   &quot;yall&quot;    &quot;fullauto&quot; &quot;itsa&quot;     &quot;onmy&quot;  
 [9,] &quot;target&quot;      &quot;went&quot;   &quot;dont&quot;    &quot;carry&quot;    &quot;good&quot;     &quot;sight&quot; 
[10,] &quot;tosee&quot;       &quot;came&quot;   &quot;loaded&quot;  &quot;owner&quot;    &quot;ifthey&quot;   &quot;build&quot; 
      Topic 7   Topic 8     Topic 9   Topic 10     Topic 11 Topic 12
 [1,] &quot;rifle&quot;   &quot;barrel&quot;    &quot;holster&quot; &quot;thisis&quot;     &quot;10mm&quot;   &quot;got&quot;   
 [2,] &quot;think&quot;   &quot;ofthe&quot;     &quot;fora&quot;    &quot;today&quot;      &quot;real&quot;   &quot;put&quot;   
 [3,] &quot;hunting&quot; &quot;lower&quot;     &quot;1911&quot;    &quot;gun&quot;        &quot;read&quot;   &quot;now&quot;   
 [4,] &quot;guys&quot;    &quot;ruger&quot;     &quot;edc&quot;     &quot;desert&quot;     &quot;dad&quot;    &quot;back&quot;  
 [5,] &quot;getting&quot; &quot;onthe&quot;     &quot;range&quot;   &quot;eagle&quot;      &quot;free&quot;   &quot;can&quot;   
 [6,] &quot;youguys&quot; &quot;thebarrel&quot; &quot;gift&quot;    &quot;friday&quot;     &quot;mynew&quot;  &quot;withmy&quot;
 [7,] &quot;action&quot;  &quot;inthe&quot;     &quot;sig&quot;     &quot;magnum&quot;     &quot;never&quot;  &quot;igot&quot;  
 [8,] &quot;doyou&quot;   &quot;inch&quot;      &quot;ilike&quot;   &quot;winchester&quot; &quot;isit&quot;   &quot;iwas&quot;  
 [9,] &quot;300&quot;     &quot;parts&quot;     &quot;built&quot;   &quot;wouldyou&quot;   &quot;hard&quot;   &quot;left&quot;  
[10,] &quot;bolt&quot;    &quot;receiver&quot;  &quot;gear&quot;    &quot;22lr&quot;       &quot;hoppes&quot; &quot;ican&quot;  
      Topic 13  Topic 14    Topic 15   Topic 16  Topic 17   
 [1,] &quot;like&quot;    &quot;guns&quot;      &quot;day&quot;      &quot;pistol&quot;  &quot;first&quot;    
 [2,] &quot;gun&quot;     &quot;made&quot;      &quot;today&quot;    &quot;need&quot;    &quot;myfirst&quot;  
 [3,] &quot;can&quot;     &quot;ofmy&quot;      &quot;old&quot;      &quot;can&quot;     &quot;ar15&quot;     
 [4,] &quot;just&quot;    &quot;printed&quot;   &quot;wanted&quot;   &quot;state&quot;   &quot;time&quot;     
 [5,] &quot;ive&quot;     &quot;anew&quot;      &quot;picked&quot;   &quot;ifyou&quot;   &quot;firsttime&quot;
 [6,] &quot;get&quot;     &quot;green&quot;     &quot;pickedup&quot; &quot;license&quot; &quot;new&quot;      
 [7,] &quot;one&quot;     &quot;military&quot;  &quot;year&quot;     &quot;needto&quot;  &quot;build&quot;    
 [8,] &quot;ihave&quot;   &quot;great&quot;     &quot;upa&quot;      &quot;check&quot;   &quot;thefirst&quot; 
 [9,] &quot;looking&quot; &quot;remington&quot; &quot;kit&quot;      &quot;new&quot;     &quot;wasa&quot;     
[10,] &quot;dont&quot;    &quot;3dprinted&quot; &quot;made&quot;     &quot;permit&quot;  &quot;setup&quot;    
      Topic 18      Topic 19  Topic 20  
 [1,] &quot;anyone&quot;      &quot;glock&quot;   &quot;years&quot;   
 [2,] &quot;find&quot;        &quot;trigger&quot; &quot;range&quot;   
 [3,] &quot;wondering&quot;   &quot;grip&quot;    &quot;ago&quot;     
 [4,] &quot;know&quot;        &quot;model&quot;   &quot;guns&quot;    
 [5,] &quot;wonderingif&quot; &quot;sampw&quot;   &quot;ammo&quot;    
 [6,] &quot;new&quot;         &quot;mampp&quot;   &quot;clean&quot;   
 [7,] &quot;cant&quot;        &quot;better&quot;  &quot;one&quot;     
 [8,] &quot;found&quot;       &quot;ithink&quot;  &quot;cleaning&quot;
 [9,] &quot;help&quot;        &quot;gen&quot;     &quot;around&quot;  
[10,] &quot;experience&quot;  &quot;psa&quot;     &quot;shooting&quot;</code></pre>
</div>
<p>Here we have actually distinguished a couple of groups that might be
useful, 14 is the only one with defense, and 17 is the only one with
hunting. 1, 7, 11, involve the word range within their topic. Carry is
only found in group 8. This would indicate that the term is the in the
top 10 in these groups. These are listed on their own below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>exampleTermData</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>exampleTermData</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>7</span>,<span class='fl'>8</span>, <span class='fl'>11</span>,<span class='fl'>17</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>      Topic 1       Topic 7   Topic 8     Topic 11 Topic 17   
 [1,] &quot;gun&quot;         &quot;rifle&quot;   &quot;barrel&quot;    &quot;10mm&quot;   &quot;first&quot;    
 [2,] &quot;defense&quot;     &quot;think&quot;   &quot;ofthe&quot;     &quot;real&quot;   &quot;myfirst&quot;  
 [3,] &quot;home&quot;        &quot;hunting&quot; &quot;lower&quot;     &quot;read&quot;   &quot;ar15&quot;     
 [4,] &quot;shotgun&quot;     &quot;guys&quot;    &quot;ruger&quot;     &quot;dad&quot;    &quot;time&quot;     
 [5,] &quot;homedefense&quot; &quot;getting&quot; &quot;onthe&quot;     &quot;free&quot;   &quot;firsttime&quot;
 [6,] &quot;ammo&quot;        &quot;youguys&quot; &quot;thebarrel&quot; &quot;mynew&quot;  &quot;new&quot;      
 [7,] &quot;forhome&quot;     &quot;action&quot;  &quot;inthe&quot;     &quot;never&quot;  &quot;build&quot;    
 [8,] &quot;gauge&quot;       &quot;doyou&quot;   &quot;inch&quot;      &quot;isit&quot;   &quot;thefirst&quot; 
 [9,] &quot;target&quot;      &quot;300&quot;     &quot;parts&quot;     &quot;hard&quot;   &quot;wasa&quot;     
[10,] &quot;tosee&quot;       &quot;bolt&quot;    &quot;receiver&quot;  &quot;hoppes&quot; &quot;setup&quot;    </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>top5termsPerTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>top5termsPerTopic</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span>

<span class='va'>topicNames</span>
</code></pre>
</div>
<pre><code>                                 Topic 1 
  &quot;gun defense home shotgun homedefense&quot; 
                                 Topic 2 
          &quot;ammo new round rounds bought&quot; 
                                 Topic 3 
             &quot;gun ever edition one post&quot; 
                                 Topic 4 
                &quot;gun full just auto fun&quot; 
                                 Topic 5 
       &quot;scam site couldnt shop firearms&quot; 
                                 Topic 6 
              &quot;red sights dot ona optic&quot; 
                                 Topic 7 
      &quot;rifle think hunting guys getting&quot; 
                                 Topic 8 
        &quot;barrel ofthe lower ruger onthe&quot; 
                                 Topic 9 
           &quot;holster fora 1911 edc range&quot; 
                                Topic 10 
         &quot;thisis today gun desert eagle&quot; 
                                Topic 11 
               &quot;10mm real read dad free&quot; 
                                Topic 12 
                  &quot;got put now back can&quot; 
                                Topic 13 
                 &quot;like gun can just ive&quot; 
                                Topic 14 
           &quot;guns made ofmy printed anew&quot; 
                                Topic 15 
           &quot;day today old wanted picked&quot; 
                                Topic 16 
           &quot;pistol need can state ifyou&quot; 
                                Topic 17 
     &quot;first myfirst ar15 time firsttime&quot; 
                                Topic 18 
&quot;anyone find wondering know wonderingif&quot; 
                                Topic 19 
        &quot;glock trigger grip model sampw&quot; 
                                Topic 20 
             &quot;years range ago guns ammo&quot; </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>7</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>TRUE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-81-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>11</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>11</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>TRUE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-82-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>928</span><span class='op'>)</span>

<span class='va'>samples</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span><span class='op'>(</span><span class='fl'>2424</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>exampleIds</span> <span class='op'>&lt;-</span> <span class='va'>samples</span>

<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>processedCorpus_guns</span><span class='op'>[</span><span class='va'>exampleIds</span><span class='op'>]</span>, <span class='va'>as.character</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$`2701`
[1] &quot;    gun question,   accessory question involving  wild dog   goat.   past 3 years  spent $2500ish  streamlight lights.  styles,  handhelds,  tlr pistol lights   rifle light,    work.   recent tlr8a     killed   real defense situation,  wild dog    goat pen   tearing   ,   barely    thought \&quot;hell yeah ill draw  glock, light   situation  put  dog .\&quot;   happen   planned,  drew   light  barely flickered   poor goat   barely    eviscerated.  bought  light 2 months ago    fresh batteries make  change,      giving   money? idk.    good lighting options    surefire price     depend    worse scenario?&quot;

$`3361`
[1] &quot;folder friday ( tbh  gotta ditch  brace) &quot;

$`997`
[1] &quot; son (12) shooting 9mm    time (imi jericho 941f) &quot;

$`5292`
[1] &quot;  born  mexico city    citizen   greatest country  human history  2015. ,  wasn` officially baptized   full blown merican  4/17/18   bought   gun.  figured      place  share . &quot;

$`6211`
[1] &quot; bought  gun  29 months.  csx  dis? &quot;

$`108`
[1] &quot;    gauge shotgun  home defense? hey .     site.      violates  rule  open ended questions.    purchase  pump action shotgun    intend     home defense.   18\&quot; barrel,    shortest  state  .  question     12 gauge  20?   multiple cases made   size      unsure.  shot  12 gauge ,      expect  recoil. &#39;  price  availability  20  12?  insight    appreciated!edit:  ended     12 gauge.    recommendations.&quot;

$`521`
[1] &quot; dog  walk &quot;

$`1631`
[1] &quot;milled aks &amp;gt; &quot;

$`2941`
[1] &quot;`yeah  grab  jacket    closet\035 &quot;

$`589`
[1] &quot;elk gun question  elk hunting benelli lupo  kimber hunter?   round 270  308  6.5 creedmoor? &quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>N</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>exampleIds</span><span class='op'>)</span>

<span class='co'># get topic proportions form example documents</span>
<span class='va'>topicProportionExamples</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>exampleIds</span>,<span class='op'>]</span>

<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span><span class='op'>&lt;-</span> <span class='va'>topicNames</span>

<span class='va'>vizDataFrame</span> <span class='op'>&lt;-</span> <span class='fu'>melt</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span>, document <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span>,variable.name <span class='op'>=</span> <span class='st'>"topic"</span>, id.vars <span class='op'>=</span> <span class='st'>"document"</span><span class='op'>)</span>  

<span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>vizDataFrame</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>topic</span>, <span class='va'>value</span>, fill <span class='op'>=</span> <span class='va'>document</span><span class='op'>)</span>, ylab <span class='op'>=</span> <span class='st'>"proportion"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>  
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>document</span>, ncol <span class='op'>=</span> <span class='va'>N</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-84-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'>lda</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lda/man/top.topic.words.html'>top.topic.words</a></span><span class='op'>(</span><span class='va'>beta</span>, <span class='fl'>5</span>, by.score <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># What are the most probable topics in the entire collection?</span>
<span class='va'>topicProportions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> <span class='op'>/</span> <span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span> 
<span class='co'># mean probablities over all paragraphs</span>

<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>topicProportions</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>     

<span class='co'># assign the topic names we created before</span>

<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>                 like gun can ive just 
                            0.08425085 
          ammo round rounds new bought 
                            0.05483074 
anyone find wondering know wonderingif 
                            0.05160066 
           red sights dot optic reddot 
                            0.05018395 
     first myfirst ar15 firsttime time 
                            0.04970224 
    barrel ofthe lower ruger thebarrel 
                            0.04969928 
               got put now back withmy 
                            0.04900192 
   rifle think hunting youguys getting 
                            0.04859209 
        glock trigger grip model sampw 
                            0.04791559 
          gun ever edition thread post 
                            0.04783190 
           day today picked wanted old 
                            0.04781741 
                gun full auto just fun 
                            0.04762567 
            years range ago clean ammo 
                            0.04716195 
           holster fora 1911 edc range 
                            0.04702664 
             10mm real read mynew free 
                            0.04656148 
          guns made ofmy printed green 
                            0.04649885 
  defense gun shotgun home homedefense 
                            0.04633359 
      thisis desert today eagle magnum 
                            0.04604641 
         pistol need can state license 
                            0.04599418 
       scam site couldnt shop firearms 
                            0.04532460 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># show summed proportions in decreased order</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>soP</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>soP</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>soP</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;0.08425 : like gun can ive just&quot;                
 [2] &quot;0.05483 : ammo round rounds new bought&quot;         
 [3] &quot;0.0516 : anyone find wondering know wonderingif&quot;
 [4] &quot;0.05018 : red sights dot optic reddot&quot;          
 [5] &quot;0.0497 : first myfirst ar15 firsttime time&quot;     
 [6] &quot;0.0497 : barrel ofthe lower ruger thebarrel&quot;    
 [7] &quot;0.049 : got put now back withmy&quot;                
 [8] &quot;0.04859 : rifle think hunting youguys getting&quot;  
 [9] &quot;0.04792 : glock trigger grip model sampw&quot;       
[10] &quot;0.04783 : gun ever edition thread post&quot;         
[11] &quot;0.04782 : day today picked wanted old&quot;          
[12] &quot;0.04763 : gun full auto just fun&quot;               
[13] &quot;0.04716 : years range ago clean ammo&quot;           
[14] &quot;0.04703 : holster fora 1911 edc range&quot;          
[15] &quot;0.04656 : 10mm real read mynew free&quot;            
[16] &quot;0.0465 : guns made ofmy printed green&quot;          
[17] &quot;0.04633 : defense gun shotgun home homedefense&quot; 
[18] &quot;0.04605 : thisis desert today eagle magnum&quot;     
[19] &quot;0.04599 : pistol need can state license&quot;        
[20] &quot;0.04532 : scam site couldnt shop firearms&quot;      </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>countsOfPrimaryTopics</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>K</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>topicsPerDoc</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>i</span>, <span class='op'>]</span> <span class='co'># select topic distribution for document i</span>
  <span class='co'># get first element position from ordered list</span>
  <span class='va'>primaryTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>topicsPerDoc</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> 
  <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>+</span> <span class='fl'>1</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>                 like gun can ive just 
                                   533 
          ammo round rounds new bought 
                                   210 
          gun ever edition thread post 
                                   150 
           red sights dot optic reddot 
                                   135 
                gun full auto just fun 
                                   126 
  defense gun shotgun home homedefense 
                                   122 
   rifle think hunting youguys getting 
                                   113 
    barrel ofthe lower ruger thebarrel 
                                   110 
     first myfirst ar15 firsttime time 
                                   108 
           day today picked wanted old 
                                   100 
anyone find wondering know wonderingif 
                                    97 
           holster fora 1911 edc range 
                                    89 
               got put now back withmy 
                                    85 
       scam site couldnt shop firearms 
                                    78 
      thisis desert today eagle magnum 
                                    72 
        glock trigger grip model sampw 
                                    72 
          guns made ofmy printed green 
                                    66 
             10mm real read mynew free 
                                    59 
         pistol need can state license 
                                    51 
            years range ago clean ammo 
                                    48 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>so</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>so</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;533 : like gun can ive just&quot;                
 [2] &quot;210 : ammo round rounds new bought&quot;         
 [3] &quot;150 : gun ever edition thread post&quot;         
 [4] &quot;135 : red sights dot optic reddot&quot;          
 [5] &quot;126 : gun full auto just fun&quot;               
 [6] &quot;122 : defense gun shotgun home homedefense&quot; 
 [7] &quot;113 : rifle think hunting youguys getting&quot;  
 [8] &quot;110 : barrel ofthe lower ruger thebarrel&quot;   
 [9] &quot;108 : first myfirst ar15 firsttime time&quot;    
[10] &quot;100 : day today picked wanted old&quot;          
[11] &quot;97 : anyone find wondering know wonderingif&quot;
[12] &quot;89 : holster fora 1911 edc range&quot;           
[13] &quot;85 : got put now back withmy&quot;               
[14] &quot;78 : scam site couldnt shop firearms&quot;       
[15] &quot;72 : thisis desert today eagle magnum&quot;      
[16] &quot;72 : glock trigger grip model sampw&quot;        
[17] &quot;66 : guns made ofmy printed green&quot;          
[18] &quot;59 : 10mm real read mynew free&quot;             
[19] &quot;51 : pistol need can state license&quot;         
[20] &quot;48 : years range ago clean ammo&quot;            </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1       Topic 2  Topic 3   Topic 4    Topic 5    Topic 6 
 [1,] &quot;gun&quot;         &quot;ammo&quot;   &quot;gun&quot;     &quot;gun&quot;      &quot;scam&quot;     &quot;red&quot;   
 [2,] &quot;defense&quot;     &quot;new&quot;    &quot;ever&quot;    &quot;full&quot;     &quot;site&quot;     &quot;sights&quot;
 [3,] &quot;home&quot;        &quot;round&quot;  &quot;edition&quot; &quot;just&quot;     &quot;couldnt&quot;  &quot;dot&quot;   
 [4,] &quot;shotgun&quot;     &quot;rounds&quot; &quot;one&quot;     &quot;auto&quot;     &quot;shop&quot;     &quot;ona&quot;   
 [5,] &quot;homedefense&quot; &quot;bought&quot; &quot;post&quot;    &quot;fun&quot;      &quot;firearms&quot; &quot;optic&quot; 
 [6,] &quot;ammo&quot;        &quot;just&quot;   &quot;home&quot;    &quot;iam&quot;      &quot;look&quot;     &quot;reddot&quot;
 [7,] &quot;forhome&quot;     &quot;mag&quot;    &quot;thread&quot;  &quot;formy&quot;    &quot;use&quot;      &quot;mount&quot; 
 [8,] &quot;gauge&quot;       &quot;back&quot;   &quot;yall&quot;    &quot;fullauto&quot; &quot;itsa&quot;     &quot;onmy&quot;  
 [9,] &quot;target&quot;      &quot;went&quot;   &quot;dont&quot;    &quot;carry&quot;    &quot;good&quot;     &quot;sight&quot; 
[10,] &quot;tosee&quot;       &quot;came&quot;   &quot;loaded&quot;  &quot;owner&quot;    &quot;ifthey&quot;   &quot;build&quot; 
      Topic 7   Topic 8     Topic 9   Topic 10     Topic 11 Topic 12
 [1,] &quot;rifle&quot;   &quot;barrel&quot;    &quot;holster&quot; &quot;thisis&quot;     &quot;10mm&quot;   &quot;got&quot;   
 [2,] &quot;think&quot;   &quot;ofthe&quot;     &quot;fora&quot;    &quot;today&quot;      &quot;real&quot;   &quot;put&quot;   
 [3,] &quot;hunting&quot; &quot;lower&quot;     &quot;1911&quot;    &quot;gun&quot;        &quot;read&quot;   &quot;now&quot;   
 [4,] &quot;guys&quot;    &quot;ruger&quot;     &quot;edc&quot;     &quot;desert&quot;     &quot;dad&quot;    &quot;back&quot;  
 [5,] &quot;getting&quot; &quot;onthe&quot;     &quot;range&quot;   &quot;eagle&quot;      &quot;free&quot;   &quot;can&quot;   
 [6,] &quot;youguys&quot; &quot;thebarrel&quot; &quot;gift&quot;    &quot;friday&quot;     &quot;mynew&quot;  &quot;withmy&quot;
 [7,] &quot;action&quot;  &quot;inthe&quot;     &quot;sig&quot;     &quot;magnum&quot;     &quot;never&quot;  &quot;igot&quot;  
 [8,] &quot;doyou&quot;   &quot;inch&quot;      &quot;ilike&quot;   &quot;winchester&quot; &quot;isit&quot;   &quot;iwas&quot;  
 [9,] &quot;300&quot;     &quot;parts&quot;     &quot;built&quot;   &quot;wouldyou&quot;   &quot;hard&quot;   &quot;left&quot;  
[10,] &quot;bolt&quot;    &quot;receiver&quot;  &quot;gear&quot;    &quot;22lr&quot;       &quot;hoppes&quot; &quot;ican&quot;  
      Topic 13  Topic 14    Topic 15   Topic 16  Topic 17   
 [1,] &quot;like&quot;    &quot;guns&quot;      &quot;day&quot;      &quot;pistol&quot;  &quot;first&quot;    
 [2,] &quot;gun&quot;     &quot;made&quot;      &quot;today&quot;    &quot;need&quot;    &quot;myfirst&quot;  
 [3,] &quot;can&quot;     &quot;ofmy&quot;      &quot;old&quot;      &quot;can&quot;     &quot;ar15&quot;     
 [4,] &quot;just&quot;    &quot;printed&quot;   &quot;wanted&quot;   &quot;state&quot;   &quot;time&quot;     
 [5,] &quot;ive&quot;     &quot;anew&quot;      &quot;picked&quot;   &quot;ifyou&quot;   &quot;firsttime&quot;
 [6,] &quot;get&quot;     &quot;green&quot;     &quot;pickedup&quot; &quot;license&quot; &quot;new&quot;      
 [7,] &quot;one&quot;     &quot;military&quot;  &quot;year&quot;     &quot;needto&quot;  &quot;build&quot;    
 [8,] &quot;ihave&quot;   &quot;great&quot;     &quot;upa&quot;      &quot;check&quot;   &quot;thefirst&quot; 
 [9,] &quot;looking&quot; &quot;remington&quot; &quot;kit&quot;      &quot;new&quot;     &quot;wasa&quot;     
[10,] &quot;dont&quot;    &quot;3dprinted&quot; &quot;made&quot;     &quot;permit&quot;  &quot;setup&quot;    
      Topic 18      Topic 19  Topic 20  
 [1,] &quot;anyone&quot;      &quot;glock&quot;   &quot;years&quot;   
 [2,] &quot;find&quot;        &quot;trigger&quot; &quot;range&quot;   
 [3,] &quot;wondering&quot;   &quot;grip&quot;    &quot;ago&quot;     
 [4,] &quot;know&quot;        &quot;model&quot;   &quot;guns&quot;    
 [5,] &quot;wonderingif&quot; &quot;sampw&quot;   &quot;ammo&quot;    
 [6,] &quot;new&quot;         &quot;mampp&quot;   &quot;clean&quot;   
 [7,] &quot;cant&quot;        &quot;better&quot;  &quot;one&quot;     
 [8,] &quot;found&quot;       &quot;ithink&quot;  &quot;cleaning&quot;
 [9,] &quot;help&quot;        &quot;gen&quot;     &quot;around&quot;  
[10,] &quot;experience&quot;  &quot;psa&quot;     &quot;shooting&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>20</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>countsOfPrimaryTopics</span>,  
                                 fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span><span class='op'>+</span>  <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span>, size<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>,legend.key.size <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key size</span>
        legend.key.height <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key height</span>
        legend.key.width <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>,<span class='op'>)</span> <span class='op'>+</span>  
<span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span> 
  <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-91-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>?</span><span class='va'>theme</span>
</code></pre>
</div>
</div>
<h3 id="major-topics-visualization-1">Major Topics Visualization</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>df_for_visualization</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span> , <span class='fl'>7</span> , <span class='fl'>8</span> , <span class='fl'>11</span> , <span class='fl'>17</span><span class='op'>)</span>,<span class='op'>]</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>7</span>,<span class='fl'>8</span>, <span class='fl'>11</span>,<span class='fl'>17</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>7</span>,<span class='fl'>8</span>,<span class='fl'>11</span>,<span class='fl'>17</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization_relevant</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>`df_for_visualization[c(1, 7, 8, 11, 17), ]`</span>,  fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span> <span class='op'>+</span>    
  <span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>   <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>scale_x_discrete</span><span class='op'>(</span>guide <span class='op'>=</span> <span class='fu'>guide_axis</span><span class='op'>(</span>n.dodge <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-92-1.png" width="624" /></p>
</div>
<h3 id="topics-1">10 Topics</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># number of topics</span>
<span class='va'>K</span> <span class='op'>&lt;-</span> <span class='fl'>10</span>
<span class='co'># set random number generator seed</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>9161</span><span class='op'>)</span>
<span class='co'># compute the LDA model, inference via 1000 iterations of Gibbs sampling</span>
<span class='va'>topicModel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/topicmodels/man/lda.html'>LDA</a></span><span class='op'>(</span><span class='va'>dtm_ngram</span>, <span class='va'>K</span>, method<span class='op'>=</span><span class='st'>"Gibbs"</span>, control<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>iter <span class='op'>=</span> <span class='fl'>500</span>, verbose <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>K = 10; V = 57538; M = 2424
Sampling 500 iterations!
Iteration 25 ...
Iteration 50 ...
Iteration 75 ...
Iteration 100 ...
Iteration 125 ...
Iteration 150 ...
Iteration 175 ...
Iteration 200 ...
Iteration 225 ...
Iteration 250 ...
Iteration 275 ...
Iteration 300 ...
Iteration 325 ...
Iteration 350 ...
Iteration 375 ...
Iteration 400 ...
Iteration 425 ...
Iteration 450 ...
Iteration 475 ...
Iteration 500 ...
Gibbs sampling completed!</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># have a look a some of the results (posterior distributions)</span>
<span class='va'>tmResult</span> <span class='op'>&lt;-</span> <span class='fu'>posterior</span><span class='op'>(</span><span class='va'>topicModel</span><span class='op'>)</span>
<span class='co'># format of the resulting object</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$names
[1] &quot;terms&quot;  &quot;topics&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>


<span class='fu'>nTerms</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>              <span class='co'># lengthOfVocab</span>
</code></pre>
</div>
<pre><code>[1] 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># topics are probability distribtions over the entire vocabulary</span>
<span class='va'>beta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span>   <span class='co'># get beta from results</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span>                <span class='co'># K distributions over nTerms(DTM) terms</span>
</code></pre>
</div>
<pre><code>[1]    10 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code> 1  2  3  4  5  6  7  8  9 10 
 1  1  1  1  1  1  1  1  1  1 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>               <span class='co'># size of collection</span>
</code></pre>
</div>
<pre><code>[1] 2424</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>theta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>topics</span> 

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>[1] 2424   10</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>15</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1   Topic 2     Topic 3   Topic 4    Topic 5     
 [1,] &quot;old&quot;     &quot;first&quot;     &quot;new&quot;     &quot;barrel&quot;   &quot;looking&quot;   
 [2,] &quot;safe&quot;    &quot;myfirst&quot;   &quot;just&quot;    &quot;can&quot;      &quot;ive&quot;       
 [3,] &quot;ihave&quot;   &quot;day&quot;       &quot;round&quot;   &quot;rifle&quot;    &quot;anyone&quot;    
 [4,] &quot;case&quot;    &quot;think&quot;     &quot;rounds&quot;  &quot;ona&quot;      &quot;fora&quot;      
 [5,] &quot;1911&quot;    &quot;gun&quot;       &quot;bought&quot;  &quot;onthe&quot;    &quot;good&quot;      
 [6,] &quot;afew&quot;    &quot;guys&quot;      &quot;mag&quot;     &quot;havea&quot;    &quot;get&quot;       
 [7,] &quot;build&quot;   &quot;time&quot;      &quot;slide&quot;   &quot;red&quot;      &quot;lookingfor&quot;
 [8,] &quot;came&quot;    &quot;one&quot;       &quot;itwas&quot;   &quot;witha&quot;    &quot;wondering&quot; 
 [9,] &quot;steel&quot;   &quot;ever&quot;      &quot;ammo&quot;    &quot;sights&quot;   &quot;something&quot; 
[10,] &quot;trigger&quot; &quot;doyou&quot;     &quot;tothe&quot;   &quot;question&quot; &quot;find&quot;      
[11,] &quot;guns&quot;    &quot;firsttime&quot; &quot;mags&quot;    &quot;dot&quot;      &quot;forthe&quot;    
[12,] &quot;today&quot;   &quot;post&quot;      &quot;issues&quot;  &quot;lower&quot;    &quot;wouldbe&quot;   
[13,] &quot;gauge&quot;   &quot;shooting&quot;  &quot;witha&quot;   &quot;sight&quot;    &quot;getting&quot;   
[14,] &quot;great&quot;   &quot;picked&quot;    &quot;withthe&quot; &quot;made&quot;     &quot;ofthe&quot;     
[15,] &quot;black&quot;   &quot;youguys&quot;   &quot;anew&quot;    &quot;reddot&quot;   &quot;one&quot;       
      Topic 6  Topic 7   Topic 8   Topic 9    Topic 10  
 [1,] &quot;got&quot;    &quot;gun&quot;     &quot;pistol&quot;  &quot;know&quot;     &quot;one&quot;     
 [2,] &quot;gun&quot;    &quot;like&quot;    &quot;need&quot;    &quot;just&quot;     &quot;found&quot;   
 [3,] &quot;back&quot;   &quot;guns&quot;    &quot;just&quot;    &quot;like&quot;     &quot;scam&quot;    
 [4,] &quot;iwas&quot;   &quot;ammo&quot;    &quot;ifyou&quot;   &quot;ihave&quot;    &quot;look&quot;    
 [5,] &quot;now&quot;    &quot;glock&quot;   &quot;state&quot;   &quot;andi&quot;     &quot;use&quot;     
 [6,] &quot;put&quot;    &quot;defense&quot; &quot;can&quot;     &quot;want&quot;     &quot;site&quot;    
 [7,] &quot;help&quot;   &quot;ofthe&quot;   &quot;new&quot;     &quot;dont&quot;     &quot;around&quot;  
 [8,] &quot;soi&quot;    &quot;buy&quot;     &quot;tobe&quot;    &quot;can&quot;      &quot;model&quot;   
 [9,] &quot;ago&quot;    &quot;isa&quot;     &quot;youcan&quot;  &quot;buti&quot;     &quot;seen&quot;    
[10,] &quot;said&quot;   &quot;agun&quot;    &quot;inthe&quot;   &quot;idont&quot;    &quot;guns&quot;    
[11,] &quot;years&quot;  &quot;thisis&quot;  &quot;dont&quot;    &quot;range&quot;    &quot;recently&quot;
[12,] &quot;get&quot;    &quot;shotgun&quot; &quot;get&quot;     &quot;much&quot;     &quot;itsa&quot;    
[13,] &quot;wheni&quot;  &quot;home&quot;    &quot;sure&quot;    &quot;wantto&quot;   &quot;never&quot;   
[14,] &quot;thegun&quot; &quot;little&quot;  &quot;license&quot; &quot;shoot&quot;    &quot;oneof&quot;   
[15,] &quot;last&quot;   &quot;ofa&quot;     &quot;every&quot;   &quot;anything&quot; &quot;bought&quot;  </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>exampleTermData</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>20</span><span class='op'>)</span>

<span class='va'>exampleTermData</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7</span>,<span class='fl'>8</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>      Topic 7   Topic 8  
 [1,] &quot;gun&quot;     &quot;pistol&quot; 
 [2,] &quot;like&quot;    &quot;need&quot;   
 [3,] &quot;guns&quot;    &quot;just&quot;   
 [4,] &quot;ammo&quot;    &quot;ifyou&quot;  
 [5,] &quot;glock&quot;   &quot;state&quot;  
 [6,] &quot;defense&quot; &quot;can&quot;    
 [7,] &quot;ofthe&quot;   &quot;new&quot;    
 [8,] &quot;buy&quot;     &quot;tobe&quot;   
 [9,] &quot;isa&quot;     &quot;youcan&quot; 
[10,] &quot;agun&quot;    &quot;inthe&quot;  
[11,] &quot;thisis&quot;  &quot;dont&quot;   
[12,] &quot;shotgun&quot; &quot;get&quot;    
[13,] &quot;home&quot;    &quot;sure&quot;   
[14,] &quot;little&quot;  &quot;license&quot;
[15,] &quot;ofa&quot;     &quot;every&quot;  
[16,] &quot;way&quot;     &quot;even&quot;   
[17,] &quot;isthe&quot;   &quot;needto&quot; 
[18,] &quot;people&quot;  &quot;take&quot;   
[19,] &quot;someone&quot; &quot;carry&quot;  
[20,] &quot;get&quot;     &quot;permit&quot; </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>top5termsPerTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>top5termsPerTopic</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span>

<span class='va'>topicNames</span>
</code></pre>
</div>
<pre><code>                       Topic 1                        Topic 2 
    &quot;old safe ihave case 1911&quot;  &quot;first myfirst day think gun&quot; 
                       Topic 3                        Topic 4 
&quot;new just round rounds bought&quot;   &quot;barrel can rifle ona onthe&quot; 
                       Topic 5                        Topic 6 
&quot;looking ive anyone fora good&quot;        &quot;got gun back iwas now&quot; 
                       Topic 7                        Topic 8 
    &quot;gun like guns ammo glock&quot; &quot;pistol need just ifyou state&quot; 
                       Topic 9                       Topic 10 
   &quot;know just like ihave andi&quot;      &quot;one found scam look use&quot; </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>7</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>TRUE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-103-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>8</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>8</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>TRUE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-104-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>928</span><span class='op'>)</span>

<span class='va'>samples</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span><span class='op'>(</span><span class='fl'>2424</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>exampleIds</span> <span class='op'>&lt;-</span> <span class='va'>samples</span>

<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>processedCorpus_guns</span><span class='op'>[</span><span class='va'>exampleIds</span><span class='op'>]</span>, <span class='va'>as.character</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$`2701`
[1] &quot;    gun question,   accessory question involving  wild dog   goat.   past 3 years  spent $2500ish  streamlight lights.  styles,  handhelds,  tlr pistol lights   rifle light,    work.   recent tlr8a     killed   real defense situation,  wild dog    goat pen   tearing   ,   barely    thought \&quot;hell yeah ill draw  glock, light   situation  put  dog .\&quot;   happen   planned,  drew   light  barely flickered   poor goat   barely    eviscerated.  bought  light 2 months ago    fresh batteries make  change,      giving   money? idk.    good lighting options    surefire price     depend    worse scenario?&quot;

$`3361`
[1] &quot;folder friday ( tbh  gotta ditch  brace) &quot;

$`997`
[1] &quot; son (12) shooting 9mm    time (imi jericho 941f) &quot;

$`5292`
[1] &quot;  born  mexico city    citizen   greatest country  human history  2015. ,  wasn` officially baptized   full blown merican  4/17/18   bought   gun.  figured      place  share . &quot;

$`6211`
[1] &quot; bought  gun  29 months.  csx  dis? &quot;

$`108`
[1] &quot;    gauge shotgun  home defense? hey .     site.      violates  rule  open ended questions.    purchase  pump action shotgun    intend     home defense.   18\&quot; barrel,    shortest  state  .  question     12 gauge  20?   multiple cases made   size      unsure.  shot  12 gauge ,      expect  recoil. &#39;  price  availability  20  12?  insight    appreciated!edit:  ended     12 gauge.    recommendations.&quot;

$`521`
[1] &quot; dog  walk &quot;

$`1631`
[1] &quot;milled aks &amp;gt; &quot;

$`2941`
[1] &quot;`yeah  grab  jacket    closet\035 &quot;

$`589`
[1] &quot;elk gun question  elk hunting benelli lupo  kimber hunter?   round 270  308  6.5 creedmoor? &quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>N</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>exampleIds</span><span class='op'>)</span>

<span class='co'># get topic proportions form example documents</span>
<span class='va'>topicProportionExamples</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>exampleIds</span>,<span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='va'>vizDataFrame</span> <span class='op'>&lt;-</span> <span class='fu'>melt</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span>, document <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span>, variable.name <span class='op'>=</span> <span class='st'>"topic"</span>, id.vars <span class='op'>=</span> <span class='st'>"document"</span><span class='op'>)</span>  
<span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>vizDataFrame</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>topic</span>, <span class='va'>value</span>, fill <span class='op'>=</span> <span class='va'>document</span><span class='op'>)</span>, ylab <span class='op'>=</span> <span class='st'>"proportion"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>  
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>document</span>, ncol <span class='op'>=</span> <span class='va'>N</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-106-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'>lda</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lda/man/top.topic.words.html'>top.topic.words</a></span><span class='op'>(</span><span class='va'>beta</span>, <span class='fl'>5</span>, by.score <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># What are the most probable topics in the entire collection?</span>
<span class='va'>topicProportions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> <span class='op'>/</span> <span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span> 
<span class='co'># mean probablities over all paragraphs</span>

<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>topicProportions</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>     

<span class='co'># assign the topic names we created before</span>

<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>  looking ive anyone good fora      andi know like just ihave 
                    0.10719529                     0.10475769 
  new round just rounds bought          got back iwas gun put 
                    0.10177846                     0.10114098 
      barrel ona red rifle can     gun like guns ammo defense 
                    0.10085448                     0.09955239 
  first myfirst day guys think       old safe case ihave 1911 
                    0.09904462                     0.09781854 
      found scam look site use pistol need ifyou state youcan 
                    0.09500357                     0.09285397 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># show summed proportions in decreased order</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>soP</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>soP</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>soP</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;0.1072 : looking ive anyone good fora&quot;   
 [2] &quot;0.10476 : andi know like just ihave&quot;     
 [3] &quot;0.10178 : new round just rounds bought&quot;  
 [4] &quot;0.10114 : got back iwas gun put&quot;         
 [5] &quot;0.10085 : barrel ona red rifle can&quot;      
 [6] &quot;0.09955 : gun like guns ammo defense&quot;    
 [7] &quot;0.09904 : first myfirst day guys think&quot;  
 [8] &quot;0.09782 : old safe case ihave 1911&quot;      
 [9] &quot;0.095 : found scam look site use&quot;        
[10] &quot;0.09285 : pistol need ifyou state youcan&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>countsOfPrimaryTopics</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>K</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>topicsPerDoc</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>i</span>, <span class='op'>]</span> <span class='co'># select topic distribution for document i</span>
  <span class='co'># get first element position from ordered list</span>
  <span class='va'>primaryTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>topicsPerDoc</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> 
  <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>+</span> <span class='fl'>1</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      old safe case ihave 1911   first myfirst day guys think 
                           375                            343 
  looking ive anyone good fora       barrel ona red rifle can 
                           299                            267 
  new round just rounds bought          got back iwas gun put 
                           264                            230 
     andi know like just ihave     gun like guns ammo defense 
                           223                            177 
      found scam look site use pistol need ifyou state youcan 
                           127                            119 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>so</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>so</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;375 : old safe case ihave 1911&quot;      
 [2] &quot;343 : first myfirst day guys think&quot;  
 [3] &quot;299 : looking ive anyone good fora&quot;  
 [4] &quot;267 : barrel ona red rifle can&quot;      
 [5] &quot;264 : new round just rounds bought&quot;  
 [6] &quot;230 : got back iwas gun put&quot;         
 [7] &quot;223 : andi know like just ihave&quot;     
 [8] &quot;177 : gun like guns ammo defense&quot;    
 [9] &quot;127 : found scam look site use&quot;      
[10] &quot;119 : pistol need ifyou state youcan&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1   Topic 2   Topic 3  Topic 4    Topic 5      Topic 6
 [1,] &quot;old&quot;     &quot;first&quot;   &quot;new&quot;    &quot;barrel&quot;   &quot;looking&quot;    &quot;got&quot;  
 [2,] &quot;safe&quot;    &quot;myfirst&quot; &quot;just&quot;   &quot;can&quot;      &quot;ive&quot;        &quot;gun&quot;  
 [3,] &quot;ihave&quot;   &quot;day&quot;     &quot;round&quot;  &quot;rifle&quot;    &quot;anyone&quot;     &quot;back&quot; 
 [4,] &quot;case&quot;    &quot;think&quot;   &quot;rounds&quot; &quot;ona&quot;      &quot;fora&quot;       &quot;iwas&quot; 
 [5,] &quot;1911&quot;    &quot;gun&quot;     &quot;bought&quot; &quot;onthe&quot;    &quot;good&quot;       &quot;now&quot;  
 [6,] &quot;afew&quot;    &quot;guys&quot;    &quot;mag&quot;    &quot;havea&quot;    &quot;get&quot;        &quot;put&quot;  
 [7,] &quot;build&quot;   &quot;time&quot;    &quot;slide&quot;  &quot;red&quot;      &quot;lookingfor&quot; &quot;help&quot; 
 [8,] &quot;came&quot;    &quot;one&quot;     &quot;itwas&quot;  &quot;witha&quot;    &quot;wondering&quot;  &quot;soi&quot;  
 [9,] &quot;steel&quot;   &quot;ever&quot;    &quot;ammo&quot;   &quot;sights&quot;   &quot;something&quot;  &quot;ago&quot;  
[10,] &quot;trigger&quot; &quot;doyou&quot;   &quot;tothe&quot;  &quot;question&quot; &quot;find&quot;       &quot;said&quot; 
      Topic 7   Topic 8  Topic 9 Topic 10
 [1,] &quot;gun&quot;     &quot;pistol&quot; &quot;know&quot;  &quot;one&quot;   
 [2,] &quot;like&quot;    &quot;need&quot;   &quot;just&quot;  &quot;found&quot; 
 [3,] &quot;guns&quot;    &quot;just&quot;   &quot;like&quot;  &quot;scam&quot;  
 [4,] &quot;ammo&quot;    &quot;ifyou&quot;  &quot;ihave&quot; &quot;look&quot;  
 [5,] &quot;glock&quot;   &quot;state&quot;  &quot;andi&quot;  &quot;use&quot;   
 [6,] &quot;defense&quot; &quot;can&quot;    &quot;want&quot;  &quot;site&quot;  
 [7,] &quot;ofthe&quot;   &quot;new&quot;    &quot;dont&quot;  &quot;around&quot;
 [8,] &quot;buy&quot;     &quot;tobe&quot;   &quot;can&quot;   &quot;model&quot; 
 [9,] &quot;isa&quot;     &quot;youcan&quot; &quot;buti&quot;  &quot;seen&quot;  
[10,] &quot;agun&quot;    &quot;inthe&quot;  &quot;idont&quot; &quot;guns&quot;  </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>countsOfPrimaryTopics</span>,  
                                 fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span><span class='op'>+</span>  <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span>, size<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>,legend.key.size <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key size</span>
        legend.key.height <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key height</span>
        legend.key.width <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>,<span class='op'>)</span> <span class='op'>+</span>  
<span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span> 
  <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-113-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>?</span><span class='va'>theme</span>
</code></pre>
</div>
</div>
<h3 id="major-topics-visualization-2">Major Topics Visualization</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>df_for_visualization</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7</span>, <span class='fl'>8</span><span class='op'>)</span>,<span class='op'>]</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7</span>,<span class='fl'>8</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7</span>,<span class='fl'>8</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization_relevant</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>`df_for_visualization[c(7, 8), ]`</span>,  fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span> <span class='op'>+</span>    
  <span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>   <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>scale_x_discrete</span><span class='op'>(</span>guide <span class='op'>=</span> <span class='fu'>guide_axis</span><span class='op'>(</span>n.dodge <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-114-1.png" width="624" /></p>
</div>
<h3 id="topics-2">5 Topics</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># number of topics</span>
<span class='va'>K</span> <span class='op'>&lt;-</span> <span class='fl'>5</span>
<span class='co'># set random number generator seed</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>9161</span><span class='op'>)</span>
<span class='co'># compute the LDA model, inference via 1000 iterations of Gibbs sampling</span>
<span class='va'>topicModel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/topicmodels/man/lda.html'>LDA</a></span><span class='op'>(</span><span class='va'>dtm_ngram</span>, <span class='va'>K</span>, method<span class='op'>=</span><span class='st'>"Gibbs"</span>, control<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>iter <span class='op'>=</span> <span class='fl'>500</span>, verbose <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>K = 5; V = 57538; M = 2424
Sampling 500 iterations!
Iteration 25 ...
Iteration 50 ...
Iteration 75 ...
Iteration 100 ...
Iteration 125 ...
Iteration 150 ...
Iteration 175 ...
Iteration 200 ...
Iteration 225 ...
Iteration 250 ...
Iteration 275 ...
Iteration 300 ...
Iteration 325 ...
Iteration 350 ...
Iteration 375 ...
Iteration 400 ...
Iteration 425 ...
Iteration 450 ...
Iteration 475 ...
Iteration 500 ...
Gibbs sampling completed!</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># have a look a some of the results (posterior distributions)</span>
<span class='va'>tmResult</span> <span class='op'>&lt;-</span> <span class='fu'>posterior</span><span class='op'>(</span><span class='va'>topicModel</span><span class='op'>)</span>
<span class='co'># format of the resulting object</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$names
[1] &quot;terms&quot;  &quot;topics&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>


<span class='fu'>nTerms</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>              <span class='co'># lengthOfVocab</span>
</code></pre>
</div>
<pre><code>[1] 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># topics are probability distribtions over the entire vocabulary</span>
<span class='va'>beta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span>   <span class='co'># get beta from results</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span>                <span class='co'># K distributions over nTerms(DTM) terms</span>
</code></pre>
</div>
<pre><code>[1]     5 57538</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>1 2 3 4 5 
1 1 1 1 1 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span>               <span class='co'># size of collection</span>
</code></pre>
</div>
<pre><code>[1] 2424</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>theta</span> <span class='op'>&lt;-</span> <span class='va'>tmResult</span><span class='op'>$</span><span class='va'>topics</span> 

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>[1] 2424    5</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>20</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1    Topic 2    Topic 3      Topic 4   Topic 5   
 [1,] &quot;just&quot;     &quot;gun&quot;      &quot;looking&quot;    &quot;gun&quot;     &quot;first&quot;   
 [2,] &quot;barrel&quot;   &quot;guns&quot;     &quot;rifle&quot;      &quot;can&quot;     &quot;gun&quot;     
 [3,] &quot;back&quot;     &quot;like&quot;     &quot;ive&quot;        &quot;need&quot;    &quot;myfirst&quot; 
 [4,] &quot;got&quot;      &quot;shooting&quot; &quot;anyone&quot;     &quot;pistol&quot;  &quot;got&quot;     
 [5,] &quot;andi&quot;     &quot;dont&quot;     &quot;like&quot;       &quot;inthe&quot;   &quot;ar15&quot;    
 [6,] &quot;today&quot;    &quot;ihave&quot;    &quot;fora&quot;       &quot;get&quot;     &quot;old&quot;     
 [7,] &quot;new&quot;      &quot;want&quot;     &quot;get&quot;        &quot;home&quot;    &quot;found&quot;   
 [8,] &quot;day&quot;      &quot;just&quot;     &quot;one&quot;        &quot;buy&quot;     &quot;scam&quot;    
 [9,] &quot;can&quot;      &quot;buti&quot;     &quot;find&quot;       &quot;take&quot;    &quot;look&quot;    
[10,] &quot;tothe&quot;    &quot;glock&quot;    &quot;good&quot;       &quot;one&quot;     &quot;ruger&quot;   
[11,] &quot;rounds&quot;   &quot;think&quot;    &quot;thanks&quot;     &quot;going&quot;   &quot;shotgun&quot; 
[12,] &quot;slide&quot;    &quot;iam&quot;      &quot;soi&quot;        &quot;time&quot;    &quot;parts&quot;   
[13,] &quot;now&quot;      &quot;new&quot;      &quot;something&quot;  &quot;just&quot;    &quot;said&quot;    
[14,] &quot;bought&quot;   &quot;also&quot;     &quot;lookingfor&quot; &quot;since&quot;   &quot;little&quot;  
[15,] &quot;inthe&quot;    &quot;use&quot;      &quot;wouldbe&quot;    &quot;know&quot;    &quot;sight&quot;   
[16,] &quot;mag&quot;      &quot;much&quot;     &quot;wondering&quot;  &quot;firearm&quot; &quot;site&quot;    
[17,] &quot;put&quot;      &quot;know&quot;     &quot;ofthe&quot;      &quot;people&quot;  &quot;model&quot;   
[18,] &quot;itwas&quot;    &quot;thati&quot;    &quot;ona&quot;        &quot;dont&quot;    &quot;recently&quot;
[19,] &quot;question&quot; &quot;defense&quot;  &quot;around&quot;     &quot;way&quot;     &quot;made&quot;    
[20,] &quot;years&quot;    &quot;range&quot;    &quot;toget&quot;      &quot;sure&quot;    &quot;ofa&quot;     </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>exampleTermData</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>20</span><span class='op'>)</span>

<span class='va'>exampleTermData</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>      Topic 2    Topic 3      Topic 4  
 [1,] &quot;gun&quot;      &quot;looking&quot;    &quot;gun&quot;    
 [2,] &quot;guns&quot;     &quot;rifle&quot;      &quot;can&quot;    
 [3,] &quot;like&quot;     &quot;ive&quot;        &quot;need&quot;   
 [4,] &quot;shooting&quot; &quot;anyone&quot;     &quot;pistol&quot; 
 [5,] &quot;dont&quot;     &quot;like&quot;       &quot;inthe&quot;  
 [6,] &quot;ihave&quot;    &quot;fora&quot;       &quot;get&quot;    
 [7,] &quot;want&quot;     &quot;get&quot;        &quot;home&quot;   
 [8,] &quot;just&quot;     &quot;one&quot;        &quot;buy&quot;    
 [9,] &quot;buti&quot;     &quot;find&quot;       &quot;take&quot;   
[10,] &quot;glock&quot;    &quot;good&quot;       &quot;one&quot;    
[11,] &quot;think&quot;    &quot;thanks&quot;     &quot;going&quot;  
[12,] &quot;iam&quot;      &quot;soi&quot;        &quot;time&quot;   
[13,] &quot;new&quot;      &quot;something&quot;  &quot;just&quot;   
[14,] &quot;also&quot;     &quot;lookingfor&quot; &quot;since&quot;  
[15,] &quot;use&quot;      &quot;wouldbe&quot;    &quot;know&quot;   
[16,] &quot;much&quot;     &quot;wondering&quot;  &quot;firearm&quot;
[17,] &quot;know&quot;     &quot;ofthe&quot;      &quot;people&quot; 
[18,] &quot;thati&quot;    &quot;ona&quot;        &quot;dont&quot;   
[19,] &quot;defense&quot;  &quot;around&quot;     &quot;way&quot;    
[20,] &quot;range&quot;    &quot;toget&quot;      &quot;sure&quot;   </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>top5termsPerTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>top5termsPerTopic</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse<span class='op'>=</span><span class='st'>" "</span><span class='op'>)</span>

<span class='va'>topicNames</span>
</code></pre>
</div>
<pre><code>                        Topic 1                         Topic 2 
    &quot;just barrel back got andi&quot;   &quot;gun guns like shooting dont&quot; 
                        Topic 3                         Topic 4 
&quot;looking rifle ive anyone like&quot;     &quot;gun can need pistol inthe&quot; 
                        Topic 5 
   &quot;first gun myfirst got ar15&quot; </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>2</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>TRUE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-125-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># visualize topics as word cloud</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fl'>3</span> <span class='co'># change for your own topic of interest</span>
<span class='va'>topicToViz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='va'>topicNames</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>]</span>, <span class='va'>topicNames</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># Or select a topic by a term contained in its name</span>

<span class='co'># select to 40 most probable terms from the topic by sorting the term-topic-probability vector in decreasing order</span>
<span class='va'>top40terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='va'>words</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>top40terms</span><span class='op'>)</span>

<span class='co'># extract the probabilites of each of the 40 terms</span>
<span class='va'>probabilities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>tmResult</span><span class='op'>$</span><span class='va'>terms</span><span class='op'>[</span><span class='va'>topicToViz</span>,<span class='op'>]</span>, decreasing<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span>
<span class='co'># visualize the terms as wordcloud</span>
<span class='va'>mycolors</span> <span class='op'>&lt;-</span> <span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fl'>8</span>, <span class='st'>"Dark2"</span><span class='op'>)</span>

<span class='fu'>wordcloud</span><span class='op'>(</span><span class='va'>words</span>, <span class='va'>probabilities</span>, random.order <span class='op'>=</span> <span class='cn'>TRUE</span>, color <span class='op'>=</span> <span class='va'>mycolors</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-126-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>928</span><span class='op'>)</span>

<span class='va'>samples</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span><span class='op'>(</span><span class='fl'>2424</span>, <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>exampleIds</span> <span class='op'>&lt;-</span> <span class='va'>samples</span>

<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>processedCorpus_guns</span><span class='op'>[</span><span class='va'>exampleIds</span><span class='op'>]</span>, <span class='va'>as.character</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$`2701`
[1] &quot;    gun question,   accessory question involving  wild dog   goat.   past 3 years  spent $2500ish  streamlight lights.  styles,  handhelds,  tlr pistol lights   rifle light,    work.   recent tlr8a     killed   real defense situation,  wild dog    goat pen   tearing   ,   barely    thought \&quot;hell yeah ill draw  glock, light   situation  put  dog .\&quot;   happen   planned,  drew   light  barely flickered   poor goat   barely    eviscerated.  bought  light 2 months ago    fresh batteries make  change,      giving   money? idk.    good lighting options    surefire price     depend    worse scenario?&quot;

$`3361`
[1] &quot;folder friday ( tbh  gotta ditch  brace) &quot;

$`997`
[1] &quot; son (12) shooting 9mm    time (imi jericho 941f) &quot;

$`5292`
[1] &quot;  born  mexico city    citizen   greatest country  human history  2015. ,  wasn` officially baptized   full blown merican  4/17/18   bought   gun.  figured      place  share . &quot;

$`6211`
[1] &quot; bought  gun  29 months.  csx  dis? &quot;

$`108`
[1] &quot;    gauge shotgun  home defense? hey .     site.      violates  rule  open ended questions.    purchase  pump action shotgun    intend     home defense.   18\&quot; barrel,    shortest  state  .  question     12 gauge  20?   multiple cases made   size      unsure.  shot  12 gauge ,      expect  recoil. &#39;  price  availability  20  12?  insight    appreciated!edit:  ended     12 gauge.    recommendations.&quot;

$`521`
[1] &quot; dog  walk &quot;

$`1631`
[1] &quot;milled aks &amp;gt; &quot;

$`2941`
[1] &quot;`yeah  grab  jacket    closet\035 &quot;

$`589`
[1] &quot;elk gun question  elk hunting benelli lupo  kimber hunter?   round 270  308  6.5 creedmoor? &quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>N</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>exampleIds</span><span class='op'>)</span>

<span class='co'># get topic proportions form example documents</span>
<span class='va'>topicProportionExamples</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>exampleIds</span>,<span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='va'>vizDataFrame</span> <span class='op'>&lt;-</span> <span class='fu'>melt</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>topicProportionExamples</span><span class='op'>)</span>, document <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>N</span><span class='op'>)</span><span class='op'>)</span>, variable.name <span class='op'>=</span> <span class='st'>"topic"</span>, id.vars <span class='op'>=</span> <span class='st'>"document"</span><span class='op'>)</span>  
<span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>vizDataFrame</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>topic</span>, <span class='va'>value</span>, fill <span class='op'>=</span> <span class='va'>document</span><span class='op'>)</span>, ylab <span class='op'>=</span> <span class='st'>"proportion"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>  
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>document</span>, ncol <span class='op'>=</span> <span class='va'>N</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-128-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>topicNames</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'>lda</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lda/man/top.topic.words.html'>top.topic.words</a></span><span class='op'>(</span><span class='va'>beta</span>, <span class='fl'>5</span>, by.score <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>, <span class='fl'>2</span>, <span class='va'>paste</span>, collapse <span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='co'># What are the most probable topics in the entire collection?</span>
<span class='va'>topicProportions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span><span class='op'>(</span><span class='va'>theta</span><span class='op'>)</span> <span class='op'>/</span> <span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>DTM</span><span class='op'>)</span> 
<span class='co'># mean probablities over all paragraphs</span>

<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>topicProportions</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>     

<span class='co'># assign the topic names we created before</span>

<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code> looking rifle ive anyone fora guns shooting glock think want 
                     0.2072675                      0.2023679 
    just back today barrel day   first myfirst ar15 old found 
                     0.2010764                      0.1992380 
   pistol need take going home 
                     0.1900502 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># show summed proportions in decreased order</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>soP</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>topicProportions</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>soP</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>soP</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;0.20727 : looking rifle ive anyone fora&quot; 
[2] &quot;0.20237 : guns shooting glock think want&quot;
[3] &quot;0.20108 : just back today barrel day&quot;    
[4] &quot;0.19924 : first myfirst ar15 old found&quot;  
[5] &quot;0.19005 : pistol need take going home&quot;   </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>countsOfPrimaryTopics</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>K</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>topicNames</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'>nDocs</span><span class='op'>(</span><span class='va'>dtm_ngram</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>topicsPerDoc</span> <span class='op'>&lt;-</span> <span class='va'>theta</span><span class='op'>[</span><span class='va'>i</span>, <span class='op'>]</span> <span class='co'># select topic distribution for document i</span>
  <span class='co'># get first element position from ordered list</span>
  <span class='va'>primaryTopic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>topicsPerDoc</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> 
  <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>countsOfPrimaryTopics</span><span class='op'>[</span><span class='va'>primaryTopic</span><span class='op'>]</span> <span class='op'>+</span> <span class='fl'>1</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    just back today barrel day  looking rifle ive anyone fora 
                           612                            552 
  first myfirst ar15 old found guns shooting glock think want 
                           498                            484 
   pistol need take going home 
                           278 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>so</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>so</span>, <span class='st'>":"</span>, <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;612 : just back today barrel day&quot;    
[2] &quot;552 : looking rifle ive anyone fora&quot; 
[3] &quot;498 : first myfirst ar15 old found&quot;  
[4] &quot;484 : guns shooting glock think want&quot;
[5] &quot;278 : pistol need take going home&quot;   </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/stats/terms.html'>terms</a></span><span class='op'>(</span><span class='va'>topicModel</span>, <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      Topic 1  Topic 2    Topic 3   Topic 4  Topic 5  
 [1,] &quot;just&quot;   &quot;gun&quot;      &quot;looking&quot; &quot;gun&quot;    &quot;first&quot;  
 [2,] &quot;barrel&quot; &quot;guns&quot;     &quot;rifle&quot;   &quot;can&quot;    &quot;gun&quot;    
 [3,] &quot;back&quot;   &quot;like&quot;     &quot;ive&quot;     &quot;need&quot;   &quot;myfirst&quot;
 [4,] &quot;got&quot;    &quot;shooting&quot; &quot;anyone&quot;  &quot;pistol&quot; &quot;got&quot;    
 [5,] &quot;andi&quot;   &quot;dont&quot;     &quot;like&quot;    &quot;inthe&quot;  &quot;ar15&quot;   
 [6,] &quot;today&quot;  &quot;ihave&quot;    &quot;fora&quot;    &quot;get&quot;    &quot;old&quot;    
 [7,] &quot;new&quot;    &quot;want&quot;     &quot;get&quot;     &quot;home&quot;   &quot;found&quot;  
 [8,] &quot;day&quot;    &quot;just&quot;     &quot;one&quot;     &quot;buy&quot;    &quot;scam&quot;   
 [9,] &quot;can&quot;    &quot;buti&quot;     &quot;find&quot;    &quot;take&quot;   &quot;look&quot;   
[10,] &quot;tothe&quot;  &quot;glock&quot;    &quot;good&quot;    &quot;one&quot;    &quot;ruger&quot;  </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>5</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>countsOfPrimaryTopics</span>,  
                                 fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span><span class='op'>+</span>  <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>angle <span class='op'>=</span> <span class='fl'>90</span>, hjust <span class='op'>=</span> <span class='fl'>1</span>, size<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>,legend.key.size <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key size</span>
        legend.key.height <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>, <span class='co'>#change legend key height</span>
        legend.key.width <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>0.4</span>, <span class='st'>'cm'</span><span class='op'>)</span>,<span class='op'>)</span> <span class='op'>+</span>  
<span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span> 
  <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-135-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>?</span><span class='va'>theme</span>
</code></pre>
</div>
</div>
<h3 id="major-topics-visualization-3">Major Topics Visualization</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>836</span><span class='op'>)</span>

<span class='va'>df_for_visualization</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>countsOfPrimaryTopics</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>df_for_visualization</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span>,<span class='op'>]</span><span class='op'>)</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>so</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>df_for_visualization_relevant</span><span class='op'>$</span><span class='va'>group_numbers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>df_for_visualization_relevant</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>group_names</span>, y<span class='op'>=</span><span class='va'>`df_for_visualization[c(2, 3), ]`</span>,  fill<span class='op'>=</span><span class='va'>group_names</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span> <span class='op'>)</span> <span class='op'>+</span>    
  <span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>alphabet</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"FF"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>   <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
   <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>scale_x_discrete</span><span class='op'>(</span>guide <span class='op'>=</span> <span class='fu'>guide_axis</span><span class='op'>(</span>n.dodge <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Topic Groups"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ylab</span><span class='op'>(</span><span class='st'>"Number of Posts in Group"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>guides</span><span class='op'>(</span>fill<span class='op'>=</span><span class='fu'>guide_legend</span><span class='op'>(</span>title<span class='op'>=</span><span class='st'>"Topic Groups"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="tad-blog-post-6_files/figure-html5/unnamed-chunk-136-1.png" width="624" /></p>
</div>
<div class="sourceCode" id="cb84"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
